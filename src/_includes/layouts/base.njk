<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{ title }} | {{ site.title }}</title>

    <link rel="shortcut icon" href="{{ site.baseUrl }}favicon.ico" type="image/x-icon">

    <!-- Fonts and CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic">
    <link rel="stylesheet" type="text/css" href="{{ site.baseUrl }}vendor/yui/cssgrids-min.css">
    <link rel="stylesheet" type="text/css" href="{{ site.baseUrl }}combo/main-min.css">
    <!-- Prism.js Syntax Highlighting (Tomorrow Night Dark Theme) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" type="text/css" href="{{ site.baseUrl }}css/docs-min.css">
    <link rel="stylesheet" href="{{ site.baseUrl }}css/blog.css" type="text/css">

    <style>
        /* Site Header */
        #hd {
            padding: 25px 20px 20px;
            margin-bottom: 35px;
        }
        #hd .site-header {
            display: flex;
            align-items: center;
        }
        #hd .site-brand {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        #hd .site-logo img {
            height: 52px;
            width: auto;
        }
        #hd .site-title {
            margin: 0;
            font-size: 32px;
            color: #30418C;
            line-height: 1.2;
            letter-spacing: normal;
        }
        #hd .site-title a {
            color: inherit;
            text-decoration: none;
        }
        #hd .site-tagline {
            margin: 5px 0 0;
            font-size: 15px;
            color: #666;
            letter-spacing: normal;
        }
    </style>
</head>

<body class="yui3-skin-sam {{ bodyClass | default('') }}">
    <div id="doc">
        {% include "partials/header.njk" %}
        
        <div id="bd" class="clearfix yui3-g">
            <div id="main" class="yui3-u-3-4">
                <div class="liner">
                    {{ content | safe }}
                </div>
            </div>
            
            {% include "partials/sidebar.njk" %}
        </div>
        
        {% include "partials/footer.njk" %}
    </div>

    <!-- Prism.js Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/show-language/prism-show-language.min.js"></script>
    <script>
    // Detect language from code content
    function detectLanguage(code) {
        // Check for HTML/markup first (has HTML tags)
        if (/<\/?[a-z][\s\S]*?>/i.test(code)) {
            return 'markup';
        }
        // JSON (starts with { and has quoted keys)
        if (/^\s*\{[\s\S]*"[^"]+"\s*:/.test(code)) {
            return 'json';
        }
        // CSS (has selectors or properties)
        if (/^\s*(#|\.|\*|@|[a-z-]+\s*\{)/im.test(code) && /:\s*[^;]+;/m.test(code)) {
            return 'css';
        }
        // PHP
        if (/^\s*<\?php|^\s*\$[a-z_]/i.test(code)) {
            return 'php';
        }
        // Shell/bash commands
        if (/^\s*(npm|curl|cd|mkdir|wget|git|sudo|echo|export|yarn|node)\s/m.test(code) ||
            /^\s*\$\s+/m.test(code)) {
            return 'bash';
        }
        // Default to JavaScript (most YUI code)
        return 'javascript';
    }
    
    // Convert old prettyprint classes
    document.querySelectorAll('pre.prettyprint, pre code.prettyprint').forEach(function(el) {
        el.classList.add('language-javascript');
        el.classList.remove('prettyprint');
    });
    
    // Handle pre tags without code children first
    document.querySelectorAll('pre').forEach(function(pre) {
        if (pre.querySelector('code')) return;
        
        var code = document.createElement('code');
        var content = pre.textContent || '';
        code.className = 'language-' + detectLanguage(content);
        code.textContent = content;
        pre.textContent = '';
        pre.appendChild(code);
    });
    
    // Add language class to all code blocks without one
    document.querySelectorAll('pre code').forEach(function(el) {
        // Skip if already has a language class
        if (el.className && el.className.indexOf('language-') !== -1) return;
        
        var code = el.textContent || '';
        el.classList.add('language-' + detectLanguage(code));
    });
    
    // Re-highlight everything
    Prism.highlightAll();
    </script>
</body>
</html>
