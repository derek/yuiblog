
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Getting cross domain JSONP data using Y.jsonp()</title>

<style type="text/css">
/*margin and padding on body element
  can introduce errors in determining
  element position and are not recommended;
  we turn them off as a foundation for YUI
  CSS treatments. */
body {
	margin:0;
	padding:0;
}
</style>

<link type="text/css" rel="stylesheet" href="../../build/cssfonts/fonts-min.css" />
<script type="text/javascript" src="../../build/yui/yui-min.js"></script>


<!--begin custom header content for this example-->
<style type="text/css">
    #out {
        margin-top: 2em;
    }
</style>

<!--end custom header content for this example-->

</head>

<body class="yui3-skin-sam  yui-skin-sam">

<h1>Getting cross domain JSONP data using Y.jsonp()</h1>

<div class="exampleIntro">
	<p>This example illustrates basic use of the <code>Y.jsonp( url, callback )</code> method, provided by the <code>jsonp</code> module.</p>

<p>For this example, we will use a JSONP service hosted on <a href="http://yuilibrary.com">YUILibrary</a> to fetch information about a random Gallery module and render some of the information on the page.</p>
			
</div>

<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->

<div id="demo">
    <input type="button" id="demo_btn" value="Get a YUI 3 Gallery module">
    <div id="out">
    </div>
</div>
<script>
YUI().use("jsonp-base", "node", "substitute",function (Y) {

    var url = "http://yuilibrary.com/gallery/api/random?callback={callback}";

    function handleJSONP(response) {
        var module = response.modules[0],

            module_template =
                '<h4><a href="{url}">{title}</a></h4>' +
                '<p class="author">{authorHTML}</p>' +
                '<div>{summary}</div>';
            author_template =
                '<img src="{icon}" height="30" width="30">' +
                ' {fullname} <span class="rank">({rank})</span>';

        module.authorHTML = Y.substitute(author_template, module.owner);

        Y.one("#out").setContent( Y.substitute(module_template, module) );
    };

    // Click the button to send the JSONP request
    Y.one("#demo_btn").on("click", function (e) {
        Y.jsonp(url, handleJSONP);
    });

});
</script>

<!--END SOURCE CODE FOR EXAMPLE =============================== -->

</body>
</html>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1350449171" alt="setstats" border="0" width="1" height="1"></noscript>