<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
   <head>
      	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.3.0/build/reset-fonts-grids/reset-fonts-grids.css">
		<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.3.0/build/calendar/assets/skins/sam/calendar.css">

      	<script type="text/javascript" src="http://yui.yahooapis.com/2.3.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
		<script type="text/javascript" src="http://yui.yahooapis.com/2.3.0/build/calendar/calendar-min.js"></script>
		
		<script type="text/javascript">
			YAHOO.example.init = function() {

				/**
				 * Helper function to get a Date object from the internal Calendar date array
				 * (should really belong in the Calendar class)
				 */				
				function getDateFromArray(dateArray)
				{
					return new Date(dateArray[0], dateArray[1]-1, dateArray[2]);
				}

				/**
				 * Helper Function to get the weekday index selected, 
				 * based on the element which was clicked on.
				 */
				function getHeaderIdx(cal, elem) {

					var idx = -1;
					var cell = (YAHOO.util.Dom.hasClass(elem, cal.Style.CSS_WEEKDAY_CELL)) ? 
									elem : YAHOO.util.Dom.getAncestorByClassName(YAHOO.util.Event.getTarget(e), cal.Style.CSS_WEEKDAY_CELL);

					// This is one of many ways to do this. Lookup the TH index from the TR. 
					// Could also parse the CSS class applied to the CELL, but I try to avoid string parsing based solutions if possible.
					if (cell) {
						var row = cell.parentNode;
						for (var i = 0; i < row.cells.length; ++i) {
							if (cell === row.cells[i]) {
								idx = i;
								break;
							}
						}
					}
					return idx;
				}

				/**
				 * Weekday onclick event handler
				 */
				function clickWeekdayHeader(e, cal) {
					var DAYS_IN_WEEK = 7;

					var idx = getHeaderIdx(cal, YAHOO.util.Event.getTarget(e));
					if (idx != -1) {
						for (var j = idx; j < cal.cellDates.length; j += DAYS_IN_WEEK) {
							var nextDate = cal.cellDates[j];
							if (!cal.isDateOOM(getDateFromArray(nextDate))) {
								cal.selectCell(j);
							}
						}
					}
				}

				/**
				 * Weekday dblclick event handler
				 */
				function doubleClickCell(e, cal) {
					var cell = YAHOO.util.Dom.getAncestorByClassName(YAHOO.util.Event.getTarget(e), cal.Style.CSS_CELL);
					if (cell) {
						// In your actual application, I'd imagine you could extend Calendar to store the "double-click" 
						// selected-special state. You'd also need to support a UI gesture to remove the selected-special state.
						YAHOO.util.Dom.addClass(cell, "selected-special");

						YAHOO.util.Event.stopPropagation(e);
						YAHOO.util.Event.preventDefault(e);
					}
				}

				var cal = new YAHOO.widget.CalendarGroup("cal1", "cal1Container", {MULTI_SELECT: true, close:true, title:"Selectable Weekdays"});

				// Setup domEventMap for each page in the CalendarGroup
				for (var i = 0; i < cal.pages.length; i++) {

					var calPage = cal.pages[i];
					
					calPage.domEventMap = {};

					// Need to add dblclick to something inside calPage.oDomContainer, so as not to interfere with click handling
					calPage.domEventMap[calPage.Style.CSS_CALENDAR] = { tag:null, event:"dblclick", handler: doubleClickCell, scope: calPage, correct: false };
					calPage.domEventMap[calPage.Style.CSS_WEEKDAY_ROW] = { tag:null, event:"click", handler: clickWeekdayHeader, scope: calPage, correct: false };
				}
				cal.render();
				
			}
			YAHOO.util.Event.addListener(window, "load", YAHOO.example.init);
		</script>
		
		<style>
			.yui-skin-sam .yui-calendar .calweekdaycell {
				cursor: pointer;
			}
			
			.yui-skin-sam .yui-calendar td.selected-special a {
				background-color:red;
			}
		</style>
   </head>
   <body class="yui-skin-sam">
		<div id="cal1Container"></div>
   </body>
</html><!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://us.js2.yimg.com/us.js.yimg.com/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1242448664" alt="setstats" border="0" width="1" height="1"></noscript>