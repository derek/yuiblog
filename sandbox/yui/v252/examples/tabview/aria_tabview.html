<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>

		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>YUI TabView Using ARIA Roles and States</title>
	
		<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.5.2/build/fonts/fonts-min.css" />
		<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.5.2/build/tabview/assets/skins/sam/tabview.css" />

		<script type="text/javascript" src="http://yui.yahooapis.com/2.5.2/build/yahoo-dom-event/yahoo-dom-event.js"></script>
		<script type="text/javascript" src="http://yui.yahooapis.com/2.5.2/build/connection/connection-min.js"></script>
		<script type="text/javascript" src="http://yui.yahooapis.com/2.5.2/build/element/element-beta-min.js"></script>
		<script type="text/javascript" src="http://yui.yahooapis.com/2.5.2/build/tabview/tabview-min.js"></script>
		<script type="text/javascript" src="./tabviewenhancement.js"></script>		

		<style type="text/css">
		
			.yui-skin-sam .yui-navset .yui-nav a:focus {
				outline: dotted 1px #000;
			}
	
			#tabview-description,
			.yui-navset div[role=log] {
				position: absolute;
				left: -999em;
			}
	
		</style>

	</head>

	<body class="yui-skin-sam">

		<h2 id="tabview-title">Browser News.</h2>
		<div id="container"></div>

		<script type="text/javascript">

			(function() {

				var oTabView = new YAHOO.widget.TabView();

				oTabView.addTab( new YAHOO.widget.Tab({
					label: "Opera",
					content: "<p>Please wait.  Content loading.</p>",
					dataSrc: "news.php?query=opera+browser",
					cacheData: true,
					active: true
				}));
			
				oTabView.addTab( new YAHOO.widget.Tab({
					label: "Firefox",
					content: "<p>Please wait.  Content loading.</p>",
					dataSrc: "news.php?query=firefox+browser",
					cacheData: true
				}));
			
				oTabView.addTab( new YAHOO.widget.Tab({
					label: "Explorer",
					content: "<p>Please wait.  Content loading.</p>",
					dataSrc: "news.php?query=microsoft+explorer+browser",
					cacheData: true
				}));
			
				oTabView.addTab( new YAHOO.widget.Tab({
					label: "Safari",
					content: "<p>Please wait.  Content loading.</p>",
					dataSrc: "news.php?query=apple+safari+browser",
					cacheData: true
				}));


				oTabView.appendTo("container");
				oTabView.enhanceAccessibility();


				var Dom = YAHOO.util.Dom,
					UA = YAHOO.env.ua,
					oActiveTab,
					oTitle,
					oTabViewEl,
					oLog,
					sInstructionalText;


				//	Only apply the WAI-ARIA Roles and States for FF 3 and IE 8 since those
				//	are the only browsers that currently support ARIA.
				
				if ((UA.gecko && UA.gecko >= 1.9) || (UA.ie && UA.ie >= 8)) {

					oActiveTab = oTabView.get("activeTab");


					//	Append some instructional text to the <H2>

					oTitle = Dom.get("tabview-title");

					sInstructionalText = oTitle.innerHTML;

					oTitle.innerHTML = (sInstructionalText + "<em id=\"tabview-description\">Press the space bar or enter key to load the content of each tab.</em>");


					//	Set the "aria-describedby" attribute of the <UL> with the role of "tablist"
					//	to the id of the <EM> inside the <H2>.  This will trigger the screen reader 
					//	to read the text of the <EM> when the TabView is initially focused, 
					//	providing some additional instructional text to the user.  (Currently this 
					//	only works with the NVDA screen reader.)
			
					Dom.getChildren(oTabView.get("element"))[0].setAttribute("aria-describedby", "tabview-description");
					

					//	Append a live region to the TabView's root element that will be used to 
					//	message users about the status of the TabView.

					oTabViewEl = oTabView.get("element");
					oLog = oTabViewEl.ownerDocument.createElement("div");

					oLog.setAttribute("role", "log");
					oLog.setAttribute("aria-live", "polite");

					oTabViewEl.appendChild(oLog);


					//	"activeTabChange" event handler used to notify the screen reader that 
					//	the content of the Tab is loading.
			
					oTabView.on("activeTabChange", function (event) {
			
						var oTabEl = this.get("activeTab").get("element"),
							sTabLabel = oTabEl.textContent || oTabEl.innerText,
							oCurrentMessage = Dom.getFirstChild(oLog),
							oMessage = oLog.ownerDocument.createElement("p");
			
						oMessage.innerHTML = "Please wait.  Content loading for " + sTabLabel + " property page.";
			
						if (oCurrentMessage) {
							oLog.replaceChild(oMessage, oCurrentMessage);
						}
						else {
							oLog.appendChild(oMessage);						
						}
			
					});	
				

					//	"dataLoadedChange" event handler used to notify the screen reader that 
					//	the content of the Tab has finished loading.
					
					var onDataLoadedChange = function (event) {

						var oTabEl = this.get("element"),
							sTabLabel = oTabEl.textContent || oTabEl.innerText,
							oCurrentMessage = Dom.getFirstChild(oLog),
							oMessage = oLog.ownerDocument.createElement("p");
			
						oMessage.innerHTML = "Content loaded for " + sTabLabel + " property page.";

						if (oCurrentMessage) {
							oLog.replaceChild(oMessage, oCurrentMessage);
						}
						else {
							oLog.appendChild(oMessage);						
						}
					
					};
				
					oTabView.getTab(0).on("dataLoadedChange", onDataLoadedChange);
					oTabView.getTab(1).on("dataLoadedChange", onDataLoadedChange);
					oTabView.getTab(2).on("dataLoadedChange", onDataLoadedChange);
					oTabView.getTab(3).on("dataLoadedChange", onDataLoadedChange);

				}
			
			})();

		</script>
<script type='text/javascript' src='http://track2.mybloglog.com/js/jsserv.php?mblID=2007010912241462'></script>

	</body>
</html><!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1336178163" alt="setstats" border="0" width="1" height="1"></noscript>