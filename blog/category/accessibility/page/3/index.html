<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">

<head profile="http://gmpg.org/xfn/11">

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=960" id="meta-viewport">
    <script>
    if (screen.width < 768) {
        document.getElementById('meta-viewport').setAttribute('content', 'width=768');
    }
    </script>


	
	<title>
		     Accessibility Archive - YUI Blog - page 3	</title>

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

	<!-- IMPORT: yuilibrary.com -->
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.5.1/build/cssgrids/cssgrids-min.css">
	<link rel="stylesheet" type="text/css" href="http://yuilibrary.com/combo/main-min.css">
	<link ref="stylesheet" type="text/css" href="http://yuilibrary.com/vendor/prettify/prettify-min.css">
	<link ref="stylesheet" type="text/css" href="http://yuilibrary.com/css/docs-min.css">
	<!-- /IMPORT -->


	<link rel="stylesheet" href="/blog/wp-content/themes/yuilibraryv2/style.css" type="text/css" />

	<link rel="pingback" href="/blog/xmlrpc.php" />

	
        <script>var YUI_config={"filter":"min","maxURLLength":1024,"groups":{"site":{"combine":true,"comboBase":"/combo/js?","root":"","modules":{"hoverable":{"path":"hoverable-min.js","requires":["event-hover","node-base","node-event-delegate"]},"search":{"path":"search-min.js","requires":["autocomplete","autocomplete-highlighters","node-pluginhost"]},"api-filter":{"path":"apidocs/api-filter-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources"]},"api-list":{"path":"apidocs/api-list-min.js","requires":["api-filter","api-search","event-key","node-focusmanager","tabview"]},"api-search":{"path":"apidocs/api-search-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources","escape"]}}}}};</script>

        <script src="http://yui.yahooapis.com/3.5.1/build/yui/yui-min.js"></script>

	<link rel="alternate" type="application/rss+xml" title="YUI Blog &raquo; Feed" href="/blog/feed/" />
<link rel="alternate" type="application/rss+xml" title="YUI Blog &raquo; Comments Feed" href="/blog/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="YUI Blog &raquo; Accessibility Category Feed" href="/blog/category/accessibility/feed/" />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js?ver=3.8.2'></script>

    <!-- GOOGLE ANALYTICS SCRIPT.
        When changing themes, be sure to copy/paste this script from this theme to the new theme.
    -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-34018865-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

</head>

<body class="archive paged category category-accessibility category-69 paged-3 category-paged-3 yui3-skin-sam">

	<div id="doc">
	      <div id="hd" class="yui3-g">
			<header>
	     <div class="content">
	     <div class="yui3-u-3-4">
               <a href="//yuilibrary.com/" rel="home"><div id="hd-logo" role="image" aria-label="YUI logo"></div></a>
             </div>
	     <div class="yui3-u-1-4">
		    	<div id="topsearch" style="position: relative; left: -40px; top: 35px;">
<form action="http://www.yuiblog.com/blog" id="main-search" class="search" method="get">
        <input type="search" class="search-input" style="width: 200px; font-size:10px;" placeholder="Search the blog" id="s" name="s" value="" />
</form>
</div>	     </div>

	     <div id="main-nav" class="yui3-u"><nav>
              <ul class="nav hoverable-group">

            <li class="nav-tab hoverable  nav-tab-active">
                <a href="http://yuilibrary.com">Home</a>

            </li>

            <li class="nav-tab hoverable ">
                <a href="http://yuilibrary.com/yui/quick-start/">Quick Start</a>

                    <ul class="nav-submenu">

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/yui/configurator/">Configurator</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/download/yui3/">Download YUI 3</a>

                            </li>

                    </ul>

            </li>

            <li class="nav-tab hoverable ">
                <a href="http://yuilibrary.com/yui/docs/">Documentation</a>

                    <ul class="nav-submenu">

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/yui/docs/guides/">User Guides</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/yui/docs/examples/">Examples</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/yui/docs/tutorials/">Tutorials</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/yui/docs/api/">API Docs</a>

                            </li>

                    </ul>

            </li>

            <li class="nav-tab hoverable nav-break">
                <a href="http://yuilibrary.com/community/">Community</a>

                    <ul class="nav-submenu">

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/gallery/">Gallery</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="/" title="YUI Blog">Blog</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/forum/">Forums</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/theater/">YUI Theater</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yui3/calendar/">Calendar</a>

                            </li>

                    </ul>

            </li>

            <li class="nav-tab hoverable ">
                <a href="http://yuilibrary.com/contribute/">Contribute</a>

                    <ul class="nav-submenu">

                            <li class="nav-child ">

                                    <a href="https://github.com/yui/" target="_blank" title="External link">YUI on GitHub &#187;</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yui3/newticket/">File a Ticket</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yui3/report/">View Tickets</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yui3/dashboard/">Dashboard</a>

                            </li>

                    </ul>

            </li>

            <li class="nav-tab hoverable ">
                <a href="http://yuilibrary.com/projects/">Other Projects</a>

                    <ul class="nav-submenu">

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yui2/">YUI 2</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yuicompressor/">YUI Compressor</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yui.github.com/yuidoc" target="_blank" title="External link">YUI Doc &#187;</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/builder/">YUI Builder</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/phploader/">YUI PHP Loader</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yuitest/">YUI Test</a>

                            </li>

                            <li class="nav-child ">

                                    <a href="http://yuilibrary.com/projects/yuilibrary/">YUI Website</a>

                            </li>

                    </ul>

            </li>

    </ul>
			</nav>
                         </div>
			 </div>
			</header>
		</div>
		<div id="bd" class="clearfix yui3-g">
<div class="yui3-u-3-4 print-max-width">
<div id="docs-main" class="content">

		<ul class="breadcrumbs"><li class="front_page"><a href="//yuilibrary.com/">YUI</a></li><li><a href="/blog">Blog</a></li>Accessibility<li></li></ul>

		
 			
							<h1>Blog: Category &#8216;Accessibility&#8217;</h1>

			
							<div class="navigation yui3-g">
	<div class="next-posts yui3-u"><a href="/blog/category/accessibility/page/4/" >&laquo; Older Entries</a></div>
            <span class="greyed nav-separator">|</span> 
    	<div class="prev-posts yui3-u-1-2">
        <a href="/blog/category/accessibility/page/2/" >Newer Entries &raquo;</a>    </div>
</div>			
									
								<div class="post-235 post type-post status-publish format-standard hentry category-accessibility category-development first-post">
				
						<h2 id="post-235"><a href="/blog/2008/07/30/tabview-aria/">Enhancing TabView Accessibility with WAI-ARIA Roles and States</a></h2>
					

						<div class="entry">
							<p>
The <a href="http://developer.yahoo.com/yui/tabview/">YUI TabView Control</a> is built on a strong<br />
foundation of semantic markup that provides users with some basic accessibility.  But while<br />
TabView looks like a desktop tab control, screen readers don&#8217;t present it as an atomic<br />
widget, leaving users to figure out how the various HTML elements that compose a TabView relate<br />
to each other.  However, through the application of the </p>
<p><a href="http://www.w3.org/TR/wai-aria/">WAI-ARIA Roles and States</a>, it is possible to enhance<br />
TabView&#8217;s accessibility such that users of screen readers perceive it as a desktop tab control.
</p>
<p>
A <a href="/sandbox/yui/v252/examples/tabview/aria_tabview.html">complete<br />
example</a> of TabView using the WAI-ARIA Roles and States is available in the YUI Sandbox.<br />
<a href="/assets/tabviewscreencast.mov">Watch a screen cast of the example<br />
running in Firefox 3 with the NVDA screen reader</a>, or<br />
<a href="http://www.nvda-project.org/wiki/Snapshots">download the latest development snapshot of<br />
NVDA</a> and try it yourself.
</p>
<div><object width="512" height="322"><param name="movie" value="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.2.16" /><param name="allowFullScreen" value="true" /><param name="bgcolor" value="#000000" /><param name="flashVars" value="id=9051193&#038;vid=3199866&#038;lang=en-us&#038;intl=us&#038;thumbUrl=http%3A//us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/4371/69134473.jpeg&#038;embed=1" /><embed src="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.2.16" type="application/x-shockwave-flash" width="512" height="322" allowFullScreen="true" bgcolor="#000000" flashVars="id=9051193&#038;vid=3199866&#038;lang=en-us&#038;intl=us&#038;thumbUrl=http%3A//us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/4371/69134473.jpeg&#038;embed=1" ></embed></object><br /><a href="http://video.yahoo.com/watch/3199866/9051193">YUI TabView with ARIA roles and states/Todd Kloots</a> @ <a href="http://video.yahoo.com" >Yahoo! Video</a></div>
<h3>Applying the WAI-ARIA Roles and States to TabView</h3>
<h4>Step 1: Getting Started</h4>
<p>
To start working with the WAI-ARIA Roles and States you&#8217;ll need both a browser and screen<br />
reader that support ARIA.  Both <a href="http://www.mozilla.com/en-US/firefox/">Firefox 3</a> and<br />
<a href="http://www.microsoft.com/windows/products/winfamily/ie/ie8/getitnow.mspx">Internet Explorer<br />
8 Beta 1</a> have ARIA support.  Trial versions of the leading<br />
<a href="http://www.freedomscientific.com/fs_products/software_jaws.asp">JAWS</a> and </p>
<p><a href="http://www.gwmicro.com/Window-Eyes/">Window-Eyes</a> screen readers are available for<br />
free download.  However, the open-source <a href="http://www.nvda-project.org/">NVDA Screen<br />
Reader</a> is the best option for developers as it is both free and provides excellent support<br />
for ARIA.
</p>
<h4>Step 2: Adding Enhanced Keyboard Support</h4>
<p>
Out of the box, TabView provides basic keyboard support.  Each Tab in a TabView is represented by<br />
an <code>&#60;A&#62;</code> element whose <code>href</code> attribute is set to the id of an </p>
<p><code>&#60;DIV&#62;</code> element that contains its content.  In IE and Firefox,<br />
<code>&#60;A&#62;</code> elements are automatically placed in the browser&#8217;s default tab index,<br />
enabling the user to toggle between Tabs by pressing the tab key, and select a Tab by<br />
pressing enter.  (In Safari and Opera, <code>&#60;A&#62;</code> elements are not in the tab index<br />
by default.  Safari users can change this by going to the Safari Menu, Selecting &#8220;Preferences&#8221;,<br />
then choose the &#8220;Advanced&#8221; tab and check the &#8220;Press Tab to highlight each item on a<br />
webpage&#8221; checkbox.)
</p>
<p>
Having all of the Tabs in a TabView in the browser&#8217;s default tab index is a mixed blessing:<br />
it provides basic keyboard accessibility, but can also make navigating more tedious in that users<br />
navigating via the tab key have to tab through every Tab&#8217;s <code>&#60;A&#62;</code> as well as the<br />
content of the active Tab&#8217;s correpsonding TabPanel in order to skip past the control.  This problem<br />
can be solved by setting the <code>tabindex</code> attribute of the <code>&#60;A&#62;</code> element<br />
of the active Tab to a value of 0, and the inactive Tabs to -1.  Setting an element&#8217;s </p>
<p><code>tabindex</code> attribute to a value of -1 removes it from the browser&#8217;s default tab order,<br />
while maintaining its focusability via JavaScript.  Therefore, with this change in place it will be<br />
easier for the user to skip over a TabView widget while navigating with the keyboard.
</p>
<h5>Mac vs. Windows</h5>
<p>
With only one Tab now in the browser&#8217;s default tab index, it will be necessary to supplement the<br />
TabView with support for the arrow keys to enable the user to navigate between Tabs as they would<br />
on the desktop.  There are two different models for arrow key support for tabbed-content controls<br />
in operating systems: Mac OS X and Windows.<br />
On Windows, pressing the left or right arrow key moves focus to the next Tab and immediately<br />
displays its corresponding TabPanel.  On the Mac, with VoiceOver enabled, the arrow keys only<br />
move focus between each Tab, and the user must press the space bar to load the content of the Tab&#8217;s<br />
corresponding TabPanel.  Of the two, the Mac&#8217;s model might be considered better for a DHTML TabView.<br />
For example, if each Tab&#8217;s content is loaded via XHR, the Mac&#8217;s more intentional Tab selection<br />
model could help prevent the user from making requests for data he/she is not interested<br />
in consuming.
</p>
<h5>Supporting Multiple Orientations</h5>
<p>The <a href="http://developer.yahoo.com/yui/docs/YAHOO.widget.TabView.html#config_orientation"><code>orientation</code></a><br />
attribute of the TabView is used to render the Tabs on any of the widget&#8217;s four sides.  To provide<br />
arrow key support that will work regardless of the orientation of the Tabs, the left and up keys<br />
will move the focus to the previous Tab, while the right and down arrow keys will move the focus to<br />
the next Tab.  As an additional convenience to the user, we&#8217;ll take another cue from the Mac&#8217;s<br />
tab control implementation so that focus is automatically moved to the first or last Tab when the<br />
user has reached the beginning or end of a list of Tabs.
</p>
<p>
To apply these keyboard enhancements to TabView, we&#8217;ll define a new prototype method named<br />
<code>enhanceAccessibility</code>.   This new method is designed to provide consistent keyboard<br />
support for TabView across all of the <a href="http://developer.yahoo.com/yui/articles/gbs/">A-Grade</a><br />
browsers.  It will work regardless of how the TabView is constructed (from existing markup, or<br />
from script), its orientation, or if its content is static or loaded via XHR.
</p>
<pre>YAHOO.widget.TabView.prototype.enhanceAccessibility = function () {

	var Dom = YAHOO.util.Dom,
		Event = YAHOO.util.Event,
		UA = YAHOO.env.ua,

		oTabViewEl = this.get("element"),
		oTabList = Dom.getChildren(oTabViewEl)[0],
		aTabListItems = Dom.getChildren(oTabList),
		aTabs = this.get("tabs"),
		oTabIndexMap = {},
		oTab,
		oTabEl,
		oTabAnchor,
		oTabContentEl,
		oFocusedTabAnchor,
		sTabId,
		oActiveTab;


	//	Set the "tabIndex" attribute of each Tab's &#60;A&#62; element: The 
	//	"tabIndex" of the active Tab's &#60;A&#62; element is set to 0, the others to -1.
	//	This improves the keyboard accessibility of the TabView by placing
	//	only one Tab in the browser's tab index by default, allowing the user
	//	to easily skip over the control when navigating the page with the tab key.

	Dom.batch(oTabList.getElementsByTagName("A"), function (element) {
		element.tabIndex = -1;
	});
	

	oActiveTab = this.get("activeTab");

	if (oActiveTab) {
		Dom.getFirstChild(oActiveTab.get("element")).tabIndex = 0;
	}


	//	Returns the &#60;A&#62; element representing each Tab in the TabView.

	var getTabAnchor = function (element) {
	
		var oTabAnchor;
	
		if (Dom.getAncestorByClassName(element, "yui-nav")) {

			if (element.nodeName.toUpperCase() === "A") {
				oTabAnchor = element;
			}
			else {
				oTabAnchor = Dom.getAncestorByTagName(element, "A");
			}

		}
		
		return oTabAnchor;
	
	};


	//	Keydown event listener for the TabView that provides support for 
	//	using the arrow keys to move focus between each Tab.

	this.on("keydown", function (event) {
	
		var oCurrentTabAnchor = getTabAnchor(Event.getTarget(event)),
			oCurrentTabLI,
			oNextTabLI,
			oNextTabAnchor;


		if (oCurrentTabAnchor) {

			oCurrentTabLI = oCurrentTabAnchor.parentNode;

			switch (Event.getCharCode(event)) {

				case 37:	// Left
				case 38:	// Up

					oNextTabLI = Dom.getPreviousSibling(oCurrentTabLI);
					
					if (!oNextTabLI) { 
						oNextTabLI = aTabListItems[aTabListItems.length-1];
					}
				
				break;

				case 39:	// Right
				case 40:	// Down

					oNextTabLI = Dom.getNextSibling(oCurrentTabLI);
					
					if (!oNextTabLI) { 
						oNextTabLI = aTabListItems[0];
					}
				
				break;
			
			}

			oNextTabAnchor = Dom.getChildren(oNextTabLI)[0];

			if (!oFocusedTabAnchor) {
				oFocusedTabAnchor = oCurrentTabAnchor;			
			}

			oFocusedTabAnchor.tabIndex = -1;
			oNextTabAnchor.tabIndex = 0;

			oNextTabAnchor.focus();

			oFocusedTabAnchor = oNextTabAnchor;

		}

	});

};</pre>
<h4>Step 3: Adding the WAI-ARIA Roles and States</h4>
<p>
With the keyboard functionality in place, we&#8217;ll proceed with the application of the WAI-ARIA Roles<br />
and States.  Once applied, assistive technologies (AT) such as a screen reader will no longer<br />
announce the HTML elements that compose the TabView as HTML elements, but as a tab control.  In<br />
this way the relationship between the WAI-ARIA Roles and States and HTML is similar to that of CSS:<br />
both enable the developer to change the presentation of markup.  And since the WAI-ARIA Roles and<br />
States enable the TabView to be presented to the user as a desktop tab control, it makes the<br />
previous work of applying desktop-like keyboard behavior all the more critical.  If users of AT are<br />
going to preceive the TabView as a desktop tab control, it needs to fulfill that expectation from a<br />
keyboard perspective.
</p>
<p>
As a best practice, apply the WAI-ARIA Roles and States via JavaScript.  Since the WAI-ARIA Roles<br />
and States depend on JavaScript-based keyboard functionality, it follows that the attributes<br />
representing the WAI-ARIA Roles and States only be applied via JavaScript.  This<br />
<a href="http://en.wikipedia.org/wiki/Progressive_enhancement">Progressive Enhancement</a><br />
strategy ensures the best possible user experience by only applying WAI-ARIA Roles and States when<br />
the browser technologies required to support them (in this case, CSS and JavaScript) are available.
</p>
<p>
Roles and states are added to a TabView&#8217;s DOM elements via the<br />
<a href="http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-core.html#ID-F68F082"><code>setAttribute</code></a><br />
method.  At present only two browsers have WAI-ARIA support:<br />
<a href="http://www.mozilla.com/en-US/firefox/">Firefox 3</a> and<br />
<a href="http://www.microsoft.com/windows/products/winfamily/ie/ie8/getitnow.mspx">Internet Explorer 8 Beta 1</a>.<br />
(The <a href="http://www.opera.com/docs/changelogs/windows/950/">changelog</a> for Opera 9.5<br />
mentions support for screen readers, MSAA, and ARIA, but in my testing in Opera I didn&#8217;t<br />
find ARIA to work.)  Therefore, we&#8217;ll make use of YUI&#8217;s browser detection<br />
(<a href="http://developer.yahoo.com/yui/docs/YAHOO.env.ua.html"><code>YAHOO.env.ua</code></a>) and<br />
only apply the Roles and States to browsers that support them.  The role of<br />
<a href="http://www.w3.org/TR/wai-aria/#tab"><code>tab</code></a> will be applied to each Tab&#8217;s </p>
<p><code>&#60;A&#62;</code> element, and the role of<br />
<a href="http://www.w3.org/TR/wai-aria/#tablist"><code>tablist</code></a> to their parent<br />
<code>&#60;UL&#62;</code>.  Finally, each Tab&#8217;s content element (<code>&#60;DIV&#62;</code>) will<br />
receive the role of <a href="http://www.w3.org/TR/wai-aria/#tabpanel"><code>tabpanel</code></a> and<br />
an <a href="http://www.w3.org/TR/wai-aria/#labelledby"><code>aria-labelledby</code></a> attribute<br />
with a value of the id of the <code>&#60;A&#62;</code> representing its corresponding Tab instance.<br />
The <code>aria-labelledby</code> attribute enables the screen reader to announce the label of the<br />
Tab for each TabPanel when  the first element in a TabPanel receives focus, providing the user with<br />
some context as to where they are.  The following example illustrates how the ARIA roles and<br />
properties are applied to each of the HTML elements that compose a TabView:</p>
<pre>&#60;div class="yui-navset"&#62;
	&#60;ul <em>role="tablist"</em>&#62;
		&#60;li&#62;
			&#60;a href="..." id="tab-1" <em>role="tab"</em>&#62;tab label&#60;/a&#62;

		&#60;/li&#62;
	&#60;/ul&#62;
	&#60;div clas="yui-content"&#62;
		&#60;div <em>role="tabpanel"</em> <em>aria-labelledby="tab-1"</em>&#62;tab content&#60;/div&#62;

	&#60;/div&#62;
&#60;/div&#62;</pre>
<h5>Screen-Reader Specific Tweaks</h5>
<p>
The implementation of the WAI-ARIA Roles and States is slightly different across screen readers, so<br />
it is necessary to make some additional tweaks.  A role of<br />
<a href="http://www.w3.org/TR/wai-aria/#presentation"><code>presentation</code></a> will need to be<br />
applied to the parent <code>&#60;LI&#62;</code> element of each <code>&#60;A&#62;</code>, so that<br />
the Window-Eyes screen reader recognizes that each Tab belongs to the same TabList.  For JAWS it is<br />
necessary to remove the <code>href</code> attribute of each Tab&#8217;s <code>&#60;A&#62;</code> element<br />
to prevent it from announcing the attribute&#8217;s value when focused. Ideally JAWS would behave like<br />
NVDA and Window-Eyes and allow the applied <code>role</code> attribute of </p>
<p><a href="http://www.w3.org/TR/wai-aria/#tab"><code>tab</code></a> to take precedence over the<br />
default role of the <code>&#60;A&#62;</code> element.  The following illustrates the updated<br />
markup for a TabView with the screen reader tweaks applied:
</p>
<pre>&#60;div class="yui-navset"&#62;
	&#60;ul <em>role="tablist"</em>&#62;
		&#60;li <em>role="presentation"</em>&#62;

			&#60;a id="tab-1" <em>role="tab"</em>&#62;tab label&#60;/a&#62;
		&#60;/li&#62;
	&#60;/ul&#62;
	&#60;div clas="yui-content"&#62;
		&#60;div <em>role="tabpanel"</em> <em>aria-labelledby="tab-1"</em>&#62;tab content&#60;/div&#62;

	&#60;/div&#62;
&#60;/div&#62;</pre>
<p>
With this strategy for applying the WAI-ARIA Roles and States to TabView, we can update the<br />
<code>enhanceAccessibility</code> method:
</p>
<pre>YAHOO.widget.TabView.prototype.enhanceAccessibility = function () {

	var Dom = YAHOO.util.Dom,
		Event = YAHOO.util.Event,
		UA = YAHOO.env.ua,

		oTabViewEl = this.get("element"),
		oTabList = Dom.getChildren(oTabViewEl)[0],
		aTabListItems = Dom.getChildren(oTabList),
		aTabs = this.get("tabs"),
		oTabIndexMap = {},
		oTab,
		oTabEl,
		oTabAnchor,
		oTabContentEl,
		oFocusedTabAnchor,
		sTabId,
		oActiveTab;


	//	Set the "tabIndex" attribute of each Tab's &#60;A&#62; element: The 
	//	"tabIndex" of the active Tab's &#60;A&#62; element is set to 0, the others to -1.
	//	This improves the keyboard accessibility of the TabView by placing
	//	only one Tab in the browser's tab index by default, allowing the user
	//	to easily skip over the control when navigating the page with the tab key.

	Dom.batch(oTabList.getElementsByTagName("A"), function (element) {
		element.tabIndex = -1;
	});
	

	oActiveTab = this.get("activeTab");

	if (oActiveTab) {
		Dom.getFirstChild(oActiveTab.get("element")).tabIndex = 0;
	}


	//	Returns the &#60;A&#62; element representing each Tab in the TabView.

	var getTabAnchor = function (element) {
	
		var oTabAnchor;
	
		if (Dom.getAncestorByClassName(element, "yui-nav")) {

			if (element.nodeName.toUpperCase() === "A") {
				oTabAnchor = element;
			}
			else {
				oTabAnchor = Dom.getAncestorByTagName(element, "A");
			}

		}
		
		return oTabAnchor;
	
	};


	//	Keydown event listener for the TabView that provides support for 
	//	using the arrow keys to move focus between each Tab.

	this.on("keydown", function (event) {
	
		var oCurrentTabAnchor = getTabAnchor(Event.getTarget(event)),
			oCurrentTabLI,
			oNextTabLI,
			oNextTabAnchor;


		if (oCurrentTabAnchor) {

			oCurrentTabLI = oCurrentTabAnchor.parentNode;

			switch (Event.getCharCode(event)) {

				case 37:	// Left
				case 38:	// Up

					oNextTabLI = Dom.getPreviousSibling(oCurrentTabLI);
					
					if (!oNextTabLI) { 
						oNextTabLI = aTabListItems[aTabListItems.length-1];
					}
				
				break;

				case 39:	// Right
				case 40:	// Down

					oNextTabLI = Dom.getNextSibling(oCurrentTabLI);
					
					if (!oNextTabLI) { 
						oNextTabLI = aTabListItems[0];
					}
				
				break;
			
			}

			oNextTabAnchor = Dom.getChildren(oNextTabLI)[0];

			if (!oFocusedTabAnchor) {
				oFocusedTabAnchor = oCurrentTabAnchor;			
			}

			oFocusedTabAnchor.tabIndex = -1;
			oNextTabAnchor.tabIndex = 0;

			oNextTabAnchor.focus();

			oFocusedTabAnchor = oNextTabAnchor;

		}

	});


	//	Only apply the WAI-ARIA Roles and States for FF 3 and IE 8 since those
	//	are the only browsers that currently support ARIA.
	
	if ((UA.gecko &#038;&#038; UA.gecko >= 1.9) || (UA.ie &#038;&#038; UA.ie >= 8)) {

		//	Set the "role" attribute of the &#60;UL&#62; encapsulating the Tabs to "tablist"

		oTabList.setAttribute("role", "tablist");
		
	
		for (var i = 0, nLength = aTabs.length; i < nLength; i++) {
		
			oTab = aTabs[i];
			oTabEl = oTab.get("element");
			oTabAnchor = Dom.getChildren(oTabEl)[0];


			//	Create a map that links the ids of each Tab's &#60;A&#62; element to  
			//	the Tab's "index" attribute to make it possible to retrieve a Tab
			//	instance reference by id.

			sTabId = oTabAnchor.id;
		
			if (!sTabId) {
				sTabId = Dom.generateId();
				oTabAnchor.id = sTabId;
			}
	
			oTabIndexMap[sTabId] = i;


			//	Need to set the "role" attribute of each Tab's &#60;LI&#62; element to 
			//  "presentation" so that Window-Eyes recognizes that each Tab belongs to 
			//	the same TabList. Without this, Window-Eyes will announce each Tab as  
			//	being "1 of 1" as opposed to "1 of 3," or "2 of 3".

			oTabEl.setAttribute("role", "presentation");

			oTabAnchor.setAttribute("role", "tab");



			//	JAWS announces the value of the "href" attribute of each Tab's &#60;A&#62;  
			//	element when it recieves focus.  Ideally JAWS would allow the 
			//	applied "role" attribute of "tab" to take precedence over the default   
			//  role of the &#60;A&#62; element like NVDA and Window-Eyes do.  It is 
			//	possible to fix this problem by removing the "href" attribute from 
			//	the &#60;A&#62;.

			oTabAnchor.removeAttribute("href");
	

			oTabContentEl = oTab.get("contentEl");

			oTabContentEl.setAttribute("role", "tabpanel");
			

			//	Set the "aria-labelledby" attribute for the TabPanel &#60;LI&#62; element to 
			//	the id of its corresponding Tab's &#60;A&#62; element.  Doing so enables the 
			//	screen reader to announce the label of the Tab for each TabPanel when  
			//	the first element in a TabPanel receives focus, providing the user  
			//	with some context as to where they are.
			
			oTabContentEl.setAttribute("aria-labelledby", sTabId);
		
		}


		//	Add a keypress listener that toggles the active Tab instance when the user 
		//	presses the Enter key.  This is necessary because the removal of the "href" 
		//	attribute from each Tab's &#60;A&#62; element (for JAWS support) causes the 
		//	TabView's default Enter key support to stop working.  Support for the Space
		//	Bar is also added as an additional convience for the user.

		this.on("keypress", function (event) {
		
			var oTabAnchor = getTabAnchor(Event.getTarget(event)),
				nCharCode = Event.getCharCode(event);
	
			if (oTabAnchor &#038;&#038; 
				(nCharCode === 13 || nCharCode === 32) &#038;&#038; 
				(oTabAnchor.parentNode !== this.get("activeTab").get("element"))) {

					this.set("activeIndex", oTabIndexMap[oTabAnchor.id]);
			
			}
		
		});
	
	}

};</pre>
<h4>Step 4: Putting It All Together</h4>
<p>
To test the new <code>enhanceAccessibility</code> method, we'll use the<br />
<a href="http://developer.yahoo.com/yui/examples/tabview/datasrc.html">Getting Content from an<br />
External Source example</a> from the existing TabView examples gallery as a starting point.<br />
Once the TabView instance has been appended to the page, we'll call the new<br />
<code>enhanceAccessibility</code> method.  Next we'll use some additional WAI-ARIA Roles and States<br />
to make some example-specific tweaks.  First we'll, use the<br />
<a href="http://www.w3.org/TR/wai-aria/#describedby"><code>describedby</code></a> </p>
<p>property to provide some helpful instructional text that will be announced to the user<br />
when the TabView initially receives focus.  Since each Tab's content is loaded asynchronously, we'll<br />
also leverage<br />
<a href="http://www.w3.org/WAI/PF/aria-practices/#LiveRegions">WAI-ARIA Live Regions</a> to<br />
message users when a Tab's content is both being loaded and has finished loading.<br />
(Note: The <code>describedby</code> property and Live Regions are currently only supported in the<br />
<a href="http://www.nvda-project.org/wiki/Snapshots">latest development snapshots of NVDA</a>.)<br />
The following code snippet illustrates how it all comes together:
</p>
<pre>(function() {

	var oTabView = new YAHOO.widget.TabView();

	oTabView.addTab( new YAHOO.widget.Tab({
		label: "Opera",
		content: "&#60;p&#62;Please wait.  Content loading.&#60;/p&#62;",
		dataSrc: "news.php?query=opera+browser",
		cacheData: true,
		active: true
	}));

	oTabView.addTab( new YAHOO.widget.Tab({
		label: "Firefox",
		content: "&#60;p&#62;Please wait.  Content loading.&#60;/p&#62;",
		dataSrc: "news.php?query=firefox+browser",
		cacheData: true
	}));

	oTabView.addTab( new YAHOO.widget.Tab({
		label: "Explorer",
		content: "&#60;p&#62;Please wait.  Content loading.&#60;/p&#62;",
		dataSrc: "news.php?query=microsoft+explorer+browser",
		cacheData: true
	}));

	oTabView.addTab( new YAHOO.widget.Tab({
		label: "Safari",
		content: "&#60;p&#62;Please wait.  Content loading.&#60;/p&#62;",
		dataSrc: "news.php?query=apple+safari+browser",
		cacheData: true
	}));


	oTabView.appendTo("container");
	oTabView.enhanceAccessibility();


	var Dom = YAHOO.util.Dom,
		UA = YAHOO.env.ua,
		oActiveTab,
		oTitle,
		oTabViewEl,
		oLog,
		sInstructionalText;


	//	Only apply the WAI-ARIA Roles and States for FF 3 and IE 8 since those
	//	are the only browsers that currently support ARIA.
	
	if ((UA.gecko &#038;&#038; UA.gecko >= 1.9) || (UA.ie &#038;&#038; UA.ie >= 8)) {

		oActiveTab = oTabView.get("activeTab");


		//	Append some instructional text to the &#60;H2&#62;

		oTitle = Dom.get("tabview-title");

		sInstructionalText = oTitle.innerHTML;

		oTitle.innerHTML = (sInstructionalText + "&#60;em id=\"tabview-description\"&#62;Press the space bar or enter key to load the content of each tab.&#60;/em&#62;");


		//	Set the "aria-describedby" attribute of the &#60;UL&#62; with the role of "tablist"
		//	to the id of the &#60;EM&#62; inside the &#60;H2&#62;.  This will trigger the screen reader 
		//	to read the text of the &#60;EM&#62; when the TabView is initially focused, 
		//	providing some additional instructional text to the user.  (Currently this 
		//	only works with the NVDA screen reader.)

		Dom.getChildren(oTabView.get("element"))[0].setAttribute("aria-describedby", "tabview-description");
		

		//	Append a live region to the TabView's root element that will be used to 
		//	message users about the status of the TabView.

		oTabViewEl = oTabView.get("element");
		oLog = oTabViewEl.ownerDocument.createElement("div");

		oLog.setAttribute("role", "log");
		oLog.setAttribute("aria-live", "polite");

		oTabViewEl.appendChild(oLog);


		//	"activeTabChange" event handler used to notify the screen reader that 
		//	the content of the Tab is loading.

		oTabView.on("activeTabChange", function (event) {

			var oTabEl = this.get("activeTab").get("element"),
				sTabLabel = oTabEl.textContent || oTabEl.innerText,
				oCurrentMessage = Dom.getFirstChild(oLog),
				oMessage = oLog.ownerDocument.createElement("p");

			oMessage.innerHTML = "Please wait.  Content loading for " + sTabLabel + " property page.";

			if (oCurrentMessage) {
				oLog.replaceChild(oMessage, oCurrentMessage);
			}
			else {
				oLog.appendChild(oMessage);						
			}

		});	
	

		//	"dataLoadedChange" event handler used to notify the screen reader that 
		//	the content of the Tab has finished loading.
		
		var onDataLoadedChange = function (event) {

			var oTabEl = this.get("element"),
				sTabLabel = oTabEl.textContent || oTabEl.innerText,
				oCurrentMessage = Dom.getFirstChild(oLog),
				oMessage = oLog.ownerDocument.createElement("p");

			oMessage.innerHTML = "Content loaded for " + sTabLabel + " property page.";

			if (oCurrentMessage) {
				oLog.replaceChild(oMessage, oCurrentMessage);
			}
			else {
				oLog.appendChild(oMessage);						
			}
		
		};
	
		oTabView.getTab(0).on("dataLoadedChange", onDataLoadedChange);
		oTabView.getTab(1).on("dataLoadedChange", onDataLoadedChange);
		oTabView.getTab(2).on("dataLoadedChange", onDataLoadedChange);
		oTabView.getTab(3).on("dataLoadedChange", onDataLoadedChange);

	}

})();</pre>
<h3>Further Reading and Resources</h3>
<ul>
<li><a href="/blog/2007/12/21/menu-waiaria/">Using WAI-ARIA Roles and States with the YUI Menu Control</a></li>
<li><a href="http://www.w3.org/TR/wai-aria/">Accessible Rich Internet Applications (WAI-ARIA) Version 1.0 W3C Specification</a></li>
<li><a href="http://www.w3.org/TR/wai-aria-practices/">WAI-ARIA Best Practices</a></li>
<li><a href="http://developer.mozilla.org/en/docs/ARIA:_Accessible_Rich_Internet_Applications/Relationship_to_HTML_FAQ">ARIA: Accessible Rich Internet Applications/Relationship to HTML FAQ</a></li>
<li><a href="http://www.mozilla.org/access/dhtml/">Accessible DHTML</a></li>
<li><a href="http://developer.mozilla.org/en/docs/Key-navigable_custom_DHTML_widgets">Key-navigable custom DHTML widgets</a></li>
<li><a href="http://www.mozilla.com/en-US/firefox/">Firefox 3</a></li>
<li><a href="http://www.microsoft.com/windows/products/winfamily/ie/ie8/getitnow.mspx">Internet Explorer 8 Beta 1</a></li>
<li><a href="http://www.nvda-project.org/">NVDA Screen Reader</a></li>
<li><a href="http://www.freedomscientific.com/fs_products/software_jaws.asp">Freedom Scientific JAWS Screen Reader</a></li>
<li><a href="http://www.gwmicro.com/Window-Eyes/">GW Micro Window-Eyes Screen Reader</a></li>
<li><a href="http://video.yahoo.com/video/play?vid=514676">An Introduction to Screen Readers</a></li>
<li><a href="http://juicystudio.com/article/making-ajax-work-with-screen-readers.php">Making Ajax Work with Screen Readers</a></li>
</ul>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/df4fd1f9aa463884decd65f5ea9d9584?s=32"> <div class="cont"><span class="name">By Todd Kloots</span><span class="date">July 30th, 2008<span></div></div>
				</div>
										
								<div class="post-231 post type-post status-publish format-standard hentry category-accessibility category-design category-development">
				
						<h2 id="post-231"><a href="/blog/2008/07/17/context-menus-and-focus-in-opera/">Context Menus and Focus in Opera</a></h2>
					

						<div class="entry">
							<p> As a JavaScript toolkit developer, there are two features lacking in Opera that have frustrated me for a while: support for the <code>contextmenu</code> DOM event and the ability to override the default rendering of focus via CSS.  When Opera released version 9.5, I was disappointed to see that neither of these features were implemented. As frontend engineers, we spend a lot of time responding to decisions made by browser manufacturers, but we don&#8217;t get much opportunity to learn the specific thought process behind those decisions. After exchanging some emails with the Opera team, I now have some insight into their decisions and the perspective that perhaps withholding such features could be beneficial to the user.</p>
<h3>Background</h3>
<p> Although the capabilities of the browser have evolved significantly in recent years, the user&#8217;s perception of the browser hasn&#8217;t necessarily evolved with it.  After the launch of Yahoo! Photos 3.0, I remember a friend of mine emailing me because she was having trouble viewing the large version of her photos.  She was repeatedly clicking on each thumbnail without success.  Eventually she figured out that she needed to double click on the thumbnails to view the full size image.  Double clicking to open a folder or a file is, of course, a natural interaction on the desktop, but for years users were trained not to expect this interaction in the context of web applications. </p>
<p> Some users still don&#8217;t expect desktop-like interaction from web applications.  I remember logging into my Yahoo! Mail not long ago and seeing checkboxes next to each message.  I paused.  What were these checkboxes, these artifacts of Web 1.0, doing in my Web 2.0 application?  I had been using the new DHTML, Outlook-like version of Yahoo! Mail since its early beta and had become used to dragging and dropping in order to move and delete messages.  But the reappearance of these checkboxes was another sign that not every user&#8217;s expectations had evolved with the capabilities of the browser. </p>
<p> As the browser has matured it has evolved it into a platform for rich application development, making it possible to deliver applications with a level of interactivity and visual fidelity of those found on the desktop.  And while the browser is now a platform, it also continues to play its original Web 1.0 role of an application, a content viewer that enables users to surf all of the news sites, blogs, etc. scattered across the eclectic Web.  But as the browser now plays these dual roles of being an application and an application development and delivery platform, how does this duality impact the user in terms of usability and accessibility?  And what user-centric features and functionality can consumers expect of a browser, especially one battling with duality?  I suspect that Opera&#8217;s answer to these questions is that not all users understand the modern browser&#8217;s dual role, and that is it necessary to render some fundamental things consistently across experiences within the browser. </p>
<h3>Context Menus</h3>
<p> <a href="http://developer.yahoo.com/yui/examples/menu/contextmenu_source.html"><img src="http://yuiblog.com/assets/klootsopera/contextmenu.gif" alt="The YUI Menu Control's ContextMenu in Safari (top) and Opera (bottom); Opera does not allow developers to customize the context menu in web applications." width="280" height="300" hspace="10" vspace="5" align="right"></a></p>
<p>Consider context menu functionality. By not implementing the <code>contextmenu</code> event, Opera does not allow frontend engineers to override the<br />
default context menu provided by the browser; all other <a href="http://developer.yahoo.com/yui/articles/gbs/">A-Grade browsers</a> support this feature. What benefit could there be to not implementing the <code>contextmenu</code> event?</p>
<p>If some users  perceive everything inside the scope of the browser as a web page, that influences the user&#8217;s expectation of what functionality will be surfaced in a context menu.  Over the years many users have come to expect that raising a context menu in the scope of a browser will surface browser-centric functionality relative to HTML content (i.e. &#8220;Open Link in New Window&#8221;), rather than functionality of the web application running within the browser.  Therefore, providing a custom context menu for a web application might not be expected or seen as helpful for users who have come to rely on functionality in the browser&#8217;s context menu.</p>
<p>The downside is that, by not allowing the developer to provide custom context menu implementations (such as those provided by the <a href="http://developer.yahoo.com/yui/menu/">YUI Menu Control</a>), Opera is in a small way preventing the user from understanding the browser as a platform for rich application development. </p>
<h3>Focus</h3>
<p>Focus could be considered as sacred as the context menu. Knowing what element has focus is fundamental to keyboard accessibility. And while most modern browsers support customization of the rendering of focus, is it a good idea to do so?  The presentation and behavior is of HTML is now so completely customizable via CSS and JavaScript that the user experience can differ drastically across sites and applications on the web.  Keeping something as fundamental as focus consistent means one less thing the user has to re-learn when navigating the across the web.  Consider the following example: </p>
<h4><a href="/sandbox/yui/v252/examples/button/example10.html#example-1">Example 1: Anchor Elements (The Good)</a></h4>
<table>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/anchor.png" height="25" width="51" alt="Screen capture of a focused anchor in Opera 9.5 for Mac"></td>
<td>Focused anchor in Opera 9.5 (Mac)</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/link-button.png" height="34" width="69" alt="Screen capture of a focused anchor styled as a button in Opera 9.5 for Mac"></td>
<td>Focused anchor styled as a button in Opera 9.5 (Mac)</td>
</tr>
</table>
<p> This example illustrates how the focused state of an anchor element is rendered consistently in Opera regardless of how it is styled.  This consistency can be considered helpful to the user in that the familiarity of the focus outline conveys the element&#8217;s role.  Therefore, the user knows what to expect when the element is clicked regardless of how it is styled.  However, as illustrated in the following example, this benefit breaks down a little as the focus model for buttons isn&#8217;t the same as it is for anchor elements.</p>
<h4><a href="/sandbox/yui/v252/examples/button/example10.html#example-2">Example 2: Buttons (The Bad)</a></h4>
<table>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/button-1.png" height="24" width="69" alt="Screen capture of a focused button in Opera 9.5 for Mac"></td>
<td>Focused, unstyled button in Opera 9.5 (Mac)</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/button-2.png" height="26" width="70" alt="Screen capture of a focused, styled button in Opera 9.5 for Mac"></td>
<td>Focused, styled button in Opera 9.5 (Mac)</td>
</tr>
</table>
<p> This example illustrates a potential flaw in Opera&#8217;s rendering of focus in version 9.5: unlike anchor elements, unstyled and styled buttons get two different renderings of focus, both of which are completely different, and different from the focus style applied to anchor elements.  So, in Opera 9.5 there are three different focus implementations for the user to learn: the system default, the Wii-style focus and the dotted border.  Compare Opera&#8217;s focus implementation to that of Safari or Internet Explorer, where by default focus is rendered consistently across elements of various types. </p>
<table>
<thead>
<tr>
<th>Opera</th>
<th>Safari</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/anchor.png" height="25" width="51" alt="Screen capture of a focused anchor in Opera 9.5 for Mac"></td>
<td><img src="http://yuiblog.com/assets/klootsopera/anchor-safari.png" height="25" width="51" alt="Screen capture of a focused anchor in Safari for Mac"></td>
<td>Focused, unstyled acnhor</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/link-button.png" height="34" width="69" alt="Screen capture of a focused anchor styled as a button in Opera 9.5 for Mac"></td>
<td><img src="http://yuiblog.com/assets/klootsopera/anchor-button-safari.png" height="34" width="69" alt="Screen capture of a focused anchor styled as a button in Safari for Mac"></td>
<td>Focused anchor styled as a button</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/button-1.png" height="24" width="69" alt="Screen capture of a focused, unstyled button in Opera 9.5 for Mac"></td>
<td><img src="http://yuiblog.com/assets/klootsopera/button-safari.png" height="24" width="67" alt="Screen capture of a focused, unstyled button in Safari for Mac"></td>
<td>Focused, unstyled button</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/button-2.png" height="26" width="70" alt="Screen capture of a focused, styled button in Opera 9.5 for Mac"></td>
<td><img src="http://yuiblog.com/assets/klootsopera/yuibutton-safari.png" height="34" width="81" alt="Screen capture of a focused, styled button in Safari for Mac"></td>
<td>Focused, styled button</td>
</tr>
</tbody>
</table>
<p> Since the default implementation of focus can be customized in other browsers, perhaps Opera users still fair better since learning Opera&#8217;s three, fixed focus models is ultimately better than having to learn potentially infinitely more.  That said, if Opera is going to prevent customization of focus in the interest of usability and accessibility, they could further improve the user experience by providing a consistent implementation of focus across elements. As it stands in Opera 9.5, the following mixed styles can appear together, presenting a  confusing set of visual cues:</p>
<h4><a href="/sandbox/yui/v252/examples/button/example10.html#example-3">Example 3: Mixed types together (The Ugly)</a></h4>
<table>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/link-button.png" height="34" width="69" alt="Screen capture of a focused anchor styled as a button in Opera 9.5 for Mac"></td>
<td>Focused anchor styled as a button in Opera 9.5 (Mac)</td>
</tr>
<tr>
<td><img src="http://yuiblog.com/assets/klootsopera/button-4.png" height="26" width="70" alt="Screen capture of a focused, styled button in Opera 9.5 for Mac"></td>
<td>Focused, styled button in Opera 9.5 (Mac)</td>
</tr>
</table>
<p> As illustrated by the first and second examples, Opera has three different, yet fixed implementations of focus.  While Opera&#8217;s implementation of focus can be considered good insofar as the user only has a limited number of focus models to learn, it might also be considered bad in that it makes it harder to provide a consistent user experience within a single site or web application.  For example, if you wanted to place an anchor and button next to each other in a toolbar, but style them consistently so that they both look like buttons, each would still render focus differently in Opera, leaving the user to wonder how the difference is significant. </p>
<h3>Conclusion</h3>
<p> In Opera designers and developers lose a degree of customization, but the user gains a slightly more consistent browsing experience. In some ways this consistency benefits the user in that fundamental interactions like focus and context menus remain the same regardless of the site or web application in use.  However, by limiting certain types of customization designers and developers will find it just a bit harder to provide a consistent user experience within their site or application and to train the user to expect more from Web 2.0. </p>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/df4fd1f9aa463884decd65f5ea9d9584?s=32"> <div class="cont"><span class="name">By Todd Kloots</span><span class="date">July 17th, 2008<span></div></div>
				</div>
										
								<div class="post-195 post type-post status-publish format-standard hentry category-accessibility category-development tag-2tbspcom tag-christian-heilmann tag-rollovers tag-unobtrusive-javascript">
				
						<h2 id="post-195"><a href="/blog/2008/04/28/unobtrusive-rollovers-using-yui/">Unobtrusive Rollovers Using YUI</a></h2>
					

						<div class="entry">
							<p><a href="http://2tbsp.com/node/91"><img src="http://yuiblog.com/assets/2tbsp-1.png" alt="Introduction to Unobtrusive JavaScript, DOM Scripting, and the Yahoo! User Interface (YUI) Library on 2tsp.com." width="510" height="174"></a></p>
<p>Chad at 2tbsp.com <a href="http://2tbsp.com/node/91">wrote up a nice tutorial last week</a> outlining some practical fundamentals with respect to writing &quot;unobtrusive JavaScript.&quot; His example implements a standard rollover, beginning with bad-old-days obtrusive scripting, migrating to unobtrusive scripting, and concluding with an unobtrusive script that leverages YUI&#8217;s <a href="http://developer.yahoo.com/yui/event/">Event Utility</a> for event attachment and the <a href="http://developer.yahoo.com/yui/dom/">Dom Collection</a>&#8216;s <a href="http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_getElementsByClassName"><code>getElementsByClassName</code></a>, <a href="http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_addClass"><code>addClass</code></a> and <a href="http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_removeClass"><code>removeClass</code></a> for class management.</p>
<p><a href="http://2tbsp.com/system/files/yui-rollover.html">Click through</a> for his functioning example.</p>
<p><a href="http://2tbsp.com/system/files/yui-rollover.html"><img src="http://yuiblog.com/assets/2tbsp-2.png" alt="Click through for the functioning example." width="510" height="96"></a></p>
<p>Of course, Chad just means this as an example of some of the practical points involved in unobtrusive scripting. Others have looked at the problem more encyclopedically  for a more ambitious (and not YUI-related) analysis of the paradigm, check out Christian Heilmann&#8217;s &quot;<a href="http://icant.co.uk/articles/seven-rules-of-unobtrusive-javascript/">The seven rules of Unobtrusive JavaScript</a>&quot;.</p>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/d011327f5a3d4f1dc4215968e2bfd524?s=32"> <div class="cont"><a href="http://ericmiraglia.com" class="name">By Eric Miraglia</a><span class="date">April 28th, 2008<span></div></div>
				</div>
										
								<div class="post-164 post type-post status-publish format-standard hentry category-accessibility category-development tag-accessibility tag-links">
				
						<h2 id="post-164"><a href="/blog/2008/01/23/empty-links/">Empty Links and Screen Readers</a></h2>
					

						<div class="entry">
							<style type="text/css">
TABLE {
	width: 49%;
	border: 1px solid Black;
	border-collapse: collapse;
	margin: 0 0 2em 0;
}</p>
<p>CAPTION {
	background-color: #ccc;
	border-bottom: none;
	padding: 0.5em 1em;
}</p>
<p>TD, TH {
	border: 1px solid #999;
}</p>
<p>TH {
	text-align: left;
	background-color: #eee;
}</p>
<p>TD.bad {
	background-color: #c00;
	color: White;
}</p>
<p>TD.ugly {
	background-color: #FFBF00;
}</p>
<p>TD.good {
	background-color: #0c0;
}</p>
<p>TD.iffy {
	background-color: #f60;
}</p>
<p>TD.almost {
	background-color: #cc0;
}
</style>
<div class="interview">
<div class="intro">
<p><img src="http://yuiblog.com/assets/mikedavies.jpg" width="250" height="188" hspace="5" vspace="5" align="right" alt=""><strong>About the Author:</strong> Mike Davies is a web developer for Yahoo! Europe focusing on web accessibility. He was the Technical Lead Developer of a website redesign which became a PAS 78 case study into the business benefits of accessible websites. Mike writes about web accessibility, Atom and web standards on his personal blog at <a href="http://www.isolani.co.uk/">isolani.co.uk</a>. (<a href="http://www.flickr.com/photos/thevoicewithin/374414594/">Photograph courtesy of Neil Crosby</a>)</p>
</div>
<p>With the help of other members of the Yahoo! Accessibility Stakeholders group, I ran a screen reader test to establish whether links that contain no link text were an accessibility barrier. We tested a number of approaches to hiding links across a typical range of screen reader and browsers.</p>
<p>The conclusion is that the most accessible link is one that contains link text. Different techniques of hiding links, from no link text, through to hiding by <abbr title="Cascading Stylesheets">CSS</abbr> can cause an accessibility barrier to screen reader users. Each screen reader presented its user with a different set of problems and barriers.</p>
<p>What follows is a detail description of the test, tabulated results, summary of techniques that passed, failed or came close, and a list of web development recommendations.</p>
<h3>The Microformats include pattern</h3>
<p>The Microformats group have created an <a href="http://microformats.org/wiki/include-pattern">include pattern</a> which is a mechanism for including a portion of data from one area of a page into another area on the same page. Essentially, it&#8217;s a means of preventing the duplication of data.</p>
<p>A good example of this is a page that lists all the reviews done by one person. Instead of every review having to duplicate the reviewer details, we can use the include pattern to define the reviewer once, and include it into each review. No needless duplication.</p>
<p>The main technique being advocated as an include is the humble link, but in an effort to minimise duplication of content, the example is an empty link; a link with no link text:</p>
<pre title="Example markup of an include pattern">
<code>
&lt;a class="include" href="#author" title="James Levine"&gt;&lt;/a&gt;
</code>
</pre>
<p>The current accessibility understanding is that empty links can present a barrier to screen reader users. The Microformats group have attempted to solve this problem by using the title attribute to offer something a screen reader can use to announce a link.</p>
<p>The issue here is to find a way of marking up a microformat include pattern that&#8217;s accessible to screen reader users.</p>
<h3>Test cases</h3>
<p>I produced 18 test cases covering a wide range of techniques to hide a link from being displayed. These tests covered:</p>
<ul>
<li>Normal links with proper link text</li>
<li>Links with no link text or title attribute</li>
<li>Links with a title, but no link text</li>
<li>Links containing just whitespace for text</li>
</ul>
<p>Each type of link was styled in the following ways:</p>
<ul>
<li>Displayed in a default manner</li>
<li>Positioned off-screen</li>
<li>Visibility of hidden</li>
<li>Display set to none</li>
</ul>
<p>The tests were carried out by three screen reader users. Two of them are super-users of screen readers, so consequently have a great deal of experience and knowledge that can allow them to work around many difficult accessibility issues. Interestingly, neither of them had their main screen reader set up to read out both the link text and the title. Both of them have multiple screen readers installed. The third tester was a web developer with a deep understanding of using screen readers.</p>
<p>Ideally, we&#8217;d need more screen reader users to create a decent sample, including non-power users, but the results we saw are fairly consistent.</p>
<h3>Success criteria</h3>
<p>There are two screen reader behaviours that form a successful test case. The first was that a link was read out normally, as if it were an inline link within a paragraph of text. The second successful behaviour was that the screen reader does not announce the presence of a link and just skips over it.</p>
<h3>The test results</h3>
<p>We covered four major screen reader versions over three different browsers. The results for each combination can be seen in the following table. The result cells are colour coded to quickly highlight techniques that are safe to use:</p>
<ul>
<li>Red-coloured cells indicates buggy behaviour or the output was likely to frustrate the screen reader user.</li>
<li>Amber-coloured cells indicate that the technique did work, but relies on stylesheets to hide the link from screen readers.</li>
<li>Light green-coloured cells indicate the technique did work, but relies on particular configurations of a screen reader.</li>
<li>Green-coloured cells indicate that the technique did work, and did not rely on stylesheets or a particular screen reader configuration.</li>
</ul>
<p>All the information conveyed in colour is also available in the table footnotes and the notes below.</p>
<h4>Tables for each browser combination</h4>
<table>
<caption>Link results for JAWS 8.0 and JAWS 7.10 with Internet Explorer 6<sup>4</sup></caption>
<thead>
<tr>
<th scope="col">type of link</th>
<th scope="col">default</th>
<th scope="col">offscreen</th>
<th scope="col"><code>visibility: hidden<code></th>
<th scope="col"><code>display: none</code></th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Normal</th>
<td class="good">text</td>
<td class="good">text</td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty</th>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace</th>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
</tr>
</tbody>
</table>
<table>
<caption>Link results for JAWS 8.0 and Firefox 2</caption>
<thead>
<tr>
<th scope="col">type of link</th>
<th scope="col">default</th>
<th scope="col">offscreen</th>
<th scope="col"><code>visibility: hidden<code></th>
<th scope="col"><code>display: none</code></th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Normal</th>
<td class="good">text</td>
<td class="good">text</td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty</th>
<td class="bad">absolute <code>href</code></td>
<td class="bad">absolute <code>href</code></td>
<td class="bad">absolute <code>href</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="bad">absolute <code>href</code>, <code>title</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace</th>
<td class="bad"><code>href</code></td>
<td class="bad">buggy<sup>1</sup></td>
<td class="bad">absolute <code>href</code></td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="bad">buggy<sup>1</sup></td>
<td class="bad">absolute <code>href</code>, <code>title</code></td>
<td class="ugly">nothing</td>
</tr>
</tbody>
</table>
<table>
<caption>Link results for JAWS 9.0 with Internet Explorer 6</caption>
<thead>
<tr>
<th scope="col">type of link</th>
<th scope="col">default</th>
<th scope="col">offscreen</th>
<th scope="col"><code>visibility: hidden<code></th>
<th scope="col"><code>display: none</code></th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Normal</th>
<td class="good">text</td>
<td class="good">text</td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty</th>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace</th>
<td class="iffy">nothing<sup>2</sup></td>
<td class="iffy">nothing<sup>2</sup></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
</tbody>
</table>
<table>
<caption>Link results for Window-Eyes 6.1 with Internet Explorer 6</caption>
<thead>
<tr>
<th scope="col">type of link</th>
<th scope="col">default</th>
<th scope="col">offscreen</th>
<th scope="col"><code>visibility: hidden<code></th>
<th scope="col"><code>display: none</code></th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Normal</th>
<td class="good">text</td>
<td class="good">text</td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty</th>
<td class="bad"><code>href</code></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
<td class="bad"><code>href</code></td>
</tr>
<tr>
<th scope="row">empty with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace</th>
<td class="almost">nothing<sup>2</sup></td>
<td class="bad"><code>href</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace with <code>title</code></th>
<td class="almost">nothing<sup>2</sup></td>
<td class="almost">nothing<sup>2</sup></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
</tbody>
</table>
<table>
<caption>Link results for Window-Eyes 6.1 with Internet Explorer 7</caption>
<thead>
<tr>
<th scope="col">type of link</th>
<th scope="col">default</th>
<th scope="col">offscreen</th>
<th scope="col"><code>visibility: hidden<code></th>
<th scope="col"><code>display: none</code></th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Normal</th>
<td class="good">text</td>
<td class="good">text</td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">empty</th>
<td class="bad">"empty", <code>href</code><sup>3</sup></td>
<td class="bad">"empty", <code>href</code><sup>3</sup></td>
<td class="ugly">nothing</td>
<td class="bad">"empty", <code>href</code><sup>3</sup></td>
</tr>
<tr>
<th scope="row">empty with <code>title</code></th>
<td class="almost"><code>title</code></td>
<td class="almost"><code>title</code></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace</th>
<td class="almost">nothing<sup>2</sup></td>
<td class="almost">nothing<sup>2</sup></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
<tr>
<th scope="row">whitespace with <code>title</code></th>
<td class="almost">nothing<sup>2</sup></td>
<td class="almost">nothing<sup>2</sup></td>
<td class="ugly">nothing</td>
<td class="ugly">nothing</td>
</tr>
</tbody>
</table>
<h4>Footnotes to the tables</h4>
<ul>
<li>1. <samp>buggy</samp> means the screen reader reacted as if there were two separate links instead of just an empty link.</li>
<li>2. <samp>nothing</samp> means that the screen reader announces there's a link, but there's no link text read out.</li>
<li>3. <samp>"empty", href</samp> means the screen reader reads out the word "empty" followed by the contents of the <code>href</code> attribute</li>
<li>4. In JAWS 8.0 with Internet Explorer when a list of links was displayed, the links could not be reordered alphabetically. We tried both a different page, and with JAWS 7.10, and that worked fine. Empty links breaks JAWS 8.10 ability to sort links when listed.</li>
</ul>
<h3>Test case failures (code red)</h3>
<p>The following is a list of failures and buggy behaviour:</p>
<ul>
<li>An empty linked styled with <code>display none</code> caused the <code>href</code> attribute of the link to be read out in Window Eyes 6.1</li>
<li>An empty link styled to <code>visibility: hidden</code> caused the <code>href</code> attribute to be read out in JAWS 7.10 and JAWS 8.0 in Internet Explorer and Firefox 2. With Firefox, JAWS 8.0 read out the absolute <abbr title="Uniform Resource Locator">URL</abbr> of the link.</li>
<li>An empty link regardless of styling (apart from <code>display: none</code>) caused the <code>href</code> attribute to be read out in JAWS 7.10 and JAWS 8.0 on both Internet Explorer and Firefox. Again, JAWS 8.0 with Firefox read out the absolute URL of the link.</li>
<li>A link containing whitespace as link text caused the <code>href</code> attribute to be read out in JAWS 7.10 and JAWS 8.0 in Internet Explorer and Firefox.</li>
<li>With JAWS 8.0 and Firefox we saw a buggy behaviour where a link containing just whitespace as link text was actually read out as two separate links.</li>
<li>With Window Eyes 6.1 and Internet Explorer 6 we saw buggy behaviour where a link containing just whitespace and a <code>title</code> attribute, but styled to appear offscreen, the <code>href</code> attribute was read out even though there was a <code>title</code> attribute present.</p>
</ul>
<h3>Test cases relying on stylesheets (code amber)</h3>
<p>All of the test cases that relied either on the <code>display</code> or <code>visibility</code> styles to hide the link from the screen reader did succeed (except for the failures noted above, for example the handling of <code>visibility</code> is exceptionally buggy in JAWS).</p>
<p>When CSS is not enabled, or the styles are ignored by the screen reader, the behaviour falls back to the default case.</p>
<h3>Test cases relying on screen reader configuration (code light green)</h3>
<p>Test cases using the <code>title</code> attribute worked when the screen reader was configured to read out <code>title</code> attributes. Both our experienced screen reader users had changed their screen reader configuration to read out <code>title</code>s on links when there was no actual link text. Unfortunately, this is not sufficient to conclude that this is a majority preference.</p>
<p>Thus, techniques using the <code>title</code> attribute are reliant on a specific screen reader configuration to work as expected. This configuration cannot be assured, and cannot be relied on.</p>
<p>Test cases designed to hide the link from a screen reader by not supplying any link text fail when the screen reader configuration is set to announce links. Announcing links gets the screen reader to preface all link text with the word 'Link'. Empty links that successfully dodge screen reader heuristics and produce no link text still run into the frustrating problem of a link being announced, but no text associated with that link.</p>
<h3>Passed test cases (code green)</h3>
<p>Only two of the eighteen test cases resulted in an unqualified pass:</p>
<ul>
<li>A normal text link with default styling</li>
<li>A normal text link displayed offscreen. (Links displayed offscreen are still announced by the screen reader)</li>
</ul>
<h3>Conclusion</h3>
<p>Not using proper link text forces the browser and screen reader to fallback to heuristics in an attempt to determine what the link text should be. Internet Explorer decides to offer the <code>title</code> attribute, and failing that, it tries to extract something readable from the <code>href</code> attribute. JAWS 8 with Firefox 2 on the other hand reads out the absolute URL of the page, followed by, if available, the <code>title</code> attribute; or if the <code>title</code> attribute is not available, it extracts something readable from the <code>href</code> attribute.</p>
<p>There are breakages in JAWS 8.0/IE6 and Windows Eyes with IE6, when the link text is empty. We observed that a screen reader user could not alphabetically sort a list of links in JAWS 8.0, and so this creates a barrier to quickly finding a link, a barrier that wasn't there before, and it's the markup that provokes/uncovers this bug.</p>
<p>Windows Eyes also has problems with empty text links, falling back to reading out the <code>href</code> attribute, and uniquely reads out the link <code>href</code> when the link is styled with <code>display: none</code>.</p>
<p>An empty link with a <code>title</code> attribute, styled with <code>display: none</code> looks to be a feasible option, but flounders because of two ungrounded assumptions:</p>
<ul>
<li>CSS will always be enabled on browsers communicating with screen readers</li>
<li>The <code>title</code> attribute is configured to be read out by screen readers.</li>
</ul>
<p>Neither of these assumptions realistically hold, nor can be relied on.</p>
<h3>Web Developer Recommendations</h3>
<ul>
<li>Always have proper link text for a link, and assure that the link text makes sense in context. At that point the link can then be hidden by positioning it offscreen. If the link is styled with <code>display</code> set to <code>none</code>, ensure that the content makes sense with and without the link text in place.</li>
<li>Never have an anchor with jusst an <code>href</code> attribute. The screen reader fallback is to read out the entire URL or try to extrapolate something readable from it, or a combination of both. This can lead to unpredictable results. How a browser or screen reader translates a URL into text that is read out requires more extensive testing.</li>
<li>Never use <code>visibility: hidden</code> to hide an empty link from view. This leads to the <code>title</code> attribute being ignored in both JAWS/IE6 set-ups, and the absolute URL of the link being read out with Firefox. It also introduces a dependency on CSS to prevent an accessibility barrier.</li>
<li>Never use just white space as the link text, the choice of link text between the setups tested differ significantly, with all combinations creating an accessibility barrier - either of reading an entire absolute URL, or guessing the link text based on URL extrapolation, or as in Window Eyes announcing a link, but with no link text read out.</li>
<li>Never use <code>display: none</code> as a means of hiding this link. This creates a dependency on CSS, since the rendering of the page in screen readers is degraded.</li>
<li>Never rely on the <code>title</code> attribute as the sole means of providing a form of link text since it's inconclusive whether <code>title</code> attributes are enabled for all screen reader users.</li>
</ul>
<h3>Resources</h3>
<ul>
<li><a href="/assets/emptylinks.html">Test cases</a>: The 18 test cases that we used for this experiment. This will allow interested parties to re-run these tests and confirm the findings.</li>
</ul>
<p>Thank you to Artur Ortega and Victor Tsaran (both of the Yahoo! Accessibility Stakeholders Group) for volunteering time to run these test cases and talk through the issues they encountered - that process was enlightening and informative. Thanks to Ben Hawkes Lewis for his insight and guidance on screen reader usage, also for volunteering to run these tests through his screen readers, and his support of running this experiment. Finally, thanks to Ben Ward for taking the initiative to understand and resolve the accessibility implications of certain markup techniques, and for providing me with an interesting problem to tackle.</p>
</div>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/95d0fde572fb37c9c7382e9743a56f68?s=32"> <div class="cont"><a href="http://isolani.co.uk" class="name">By Mike Davies</a><span class="date">January 23rd, 2008<span></div></div>
				</div>
										
								<div class="post-162 post type-post status-publish format-standard hentry category-accessibility category-design category-development tag-accessibility tag-charts tag-tables tag-visualizing-data">
				
						<h2 id="post-162"><a href="/blog/2008/01/17/tables-and-charts/">Automatic conversion from simple, accessible data tables to YUI Charts</a></h2>
					

						<div class="entry">
							<link rel="stylesheet" type="text/css" href="/assets/charttable/chartsstyles.css">
<div class="interview">
<div class="intro">
<p><img src="http://yuiblog.com/assets/heilmann.jpg" width="300" height="225" hspace="5" vspace="5" align="right"><strong>About the Author:</strong> Christian Heilmann is the author of <em><a href="/blog/2006/06/27/heilmann-excerpt/">Beginning JavaScript with DOM Scripting and Ajax</a></em>. He has worked in web development for almost 9 years for several agencies and .coms and is currently a lead developer at Yahoo! in England.  Christian is a frequent speaker on the conference circuit in the UK and Europe; you can find some of his writing <a href="/blog/2007/01/17/event-plan/">here on YUIBlog</a> as well as on his personal blog at <a href="http://wait-till-i.com">http://wait-till-i.com</a>.</p>
</div>
<p>Charts are a great idea to make rows and rows of boring numbers easier to understand and to take in &mdash; for people that can see them. However, not all of your site&#8217;s visitors can see and you&#8217;ll also want to keep information you offer available for search engines. There are a lot of libraries on the web that allow you to create charts, but not many take this use case into consideration.</p>
<h2>In praise of data tables</h2>
<p>This is where data tables come into play. (<strong>Note:</strong> For the purposes of this article, I&#8217;m referring to pure HTML tables &mdash; not to rich UI controls like Jenny Han Donnelly&#8217;s <a href="http://developer.yahoo.com/yui/datatable/">YUI DataTable Control</a>.)  They are the perfect data construct in HTML as they are  available both for people that can see and those who can&#8217;t. Assistive technologies like screen readers offer a way to navigate tables and to read their information row-by-row and cell-by-cell. All you need to do to please everyone is to use the correct markup (including a few attributes you might not have used yet):</p>
<pre><code>&lt;table summary=&quot;Results of a survey of which animals people would like to see more on YDN&quot;&gt;
  &lt;caption&gt;What animals would you like to see more?&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope=&quot;col&quot;&gt;Animal&lt;/th&gt;
      &lt;th scope=&quot;col&quot;&gt;Requests&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Kittens&lt;/td&gt;
      &lt;td&gt;45331&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Puppies&lt;/td&gt;
      &lt;td&gt;32323&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Elephants&lt;/td&gt;
      &lt;td&gt;12345&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Badgers&lt;/td&gt;
      &lt;td&gt;6546&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Sharks (without lasers)&lt;/td&gt;
      &lt;td&gt;223&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Sharks (with lasers)&lt;/td&gt;
      &lt;td&gt;2323&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
<p>The <code>summary</code> attribute tells assistive technology what this table is about and the <code>caption</code> shows up for all users. The <code>th</code> elements define what cells are headers and the <code>scope</code> attribute applies them to all the data cells they are connected to. In this case it means that &#8220;animal&#8221; gets read out before each animal and &#8220;requests&#8221; before each number. This means that even a visitor who cannot see will still know in row five what the information is about. All in all the table renders as:</p>
<table summary="Results of a survey of which animals people would like to see more on YDN">
<caption>What animals would you like to see more?</caption>
<thead>
<tr>
<th scope="col">Animal</th>
<th scope="col">Requests</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kittens</td>
<td>45331</td>
</tr>
<tr>
<td>Puppies</td>
<td>32323</td>
</tr>
<tr>
<td>Elephants</td>
<td>12345</td>
</tr>
<tr>
<td>Badgers</td>
<td>6546</td>
</tr>
<tr>
<td>Sharks (without lasers)</td>
<td>223</td>
</tr>
<tr>
<td>Sharks (with lasers)</td>
<td>2323</td>
</tr>
</tbody>
</table>
<p>Easy to understand, but not too pretty. And it can get boring.  How about we use this information and create a tasty pie chart like the following (click on the image below to see the working example in action)?</p>
<p><a href="/assets/charttable/chartsexample.html"><img src="http://yuiblog.com/assets/charttable/chart-table.png" alt="The accessible table enhanced with a pie chart (image; click through to see working example)" width="414" height="536" border="0"></a></p>
<h2>Using table data to automatically generate charts</h2>
<p>In order to have the table be preceeded by a pie chart like this all you need is to add two scripts at the end of the document body and a class called <code>yui-table</code> to the table itself. For example:</p>
<pre><code>&lt;table class=&quot;yui-table&quot; summary=&quot;Results of a survey of what browser people love&quot;&gt;
  &lt;caption&gt;What browser do you love?&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope=&quot;col&quot;&gt;Browser&lt;/th&gt;
      &lt;th scope=&quot;col&quot;&gt;Lovers&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;MSIE&lt;/td&gt;
      &lt;td&gt;221&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Firefox&lt;/td&gt;
      &lt;td&gt;516&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Opera&lt;/td&gt;
      &lt;td&gt;312&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Safari&lt;/td&gt;
      &lt;td&gt;100&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Omniweb&lt;/td&gt;
      &lt;td&gt;30&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lynx&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;script src=&quot;http://yui.yahooapis.com/2.4.1/build/yuiloader/yuiloader-beta-min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;tablestoyuicharts.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>This will show in a browser with the latest Flash plugin like this:</p>
<p><a href="/assets/charttable/chartsexample.html"><img src="http://yuiblog.com/assets/charttable/chart-table2.png" alt="The accessible table enhanced with a pie chart (image; click through to see working example)" width="414" height="527" border="0"></a></p>
<p>You can define the size of the chart in CSS by defining a width and height for each div element with a class of <code>yuichartfromtable</code>:</p>
<pre><code>div.yuichartfromtable{
  width:300px;
  height:300px;
  margin:0 auto;
}
</code></pre>
<p>As for the scripts: the first script is the <a href="http://developer.yahoo.com/yui/loader">YUI Loader Utility</a> which allows you to pull in YUI components on-demand. This is great, as you don&#8217;t need to add lots and lots of <code>script</code> elements but let the YUI Loader figure out what it needs. You can <a href="/assets/charttable/tablestoyuicharts.js">download the second script here</a>; if you care to know what is going on with it, check the following section. If you just want to use the script, then you&#8217;re done :-).</p>
<h2>How does this work?</h2>
<p>The script to turn all tables with the class <code>yui-table</code> into charts is quite short, as it uses the newer YUI components that take a lot of the heavy lifting off you, especially the table-to-dataset conversion which is done by the <a href="http://developer.yahoo.com/yui/datasource">YUI DataSource Utility</a>. The full script is this:</p>
<pre><code>
var tablestoYUIchartsplease = new YAHOO.util.YUILoader({
  require: ['charts'],
  onSuccess: function(){
    var tables = YAHOO.util.Dom.getElementsByClassName('yui-table','table');
    YAHOO.util.Dom.batch(tables,function(o){
      var chartcontainer = document.createElement('div');
      YAHOO.util.Dom.addClass(chartcontainer,'yuichartfromtable');
      YAHOO.util.Dom.insertBefore(chartcontainer,o);
      var data = new YAHOO.util.DataSource(o);
      data.responseType = YAHOO.util.DataSource.TYPE_HTMLTABLE;
      data.responseSchema = {fields:['response','count']};
      YAHOO.widget.Chart.SWFURL = 'http://developer.yahoo.com/yui/build/charts/assets/charts.swf?_yuiversion=2.4.1';
      var chart = new YAHOO.widget.PieChart(chartcontainer,data,{
        categoryField:'response',
        dataField:'count',
        expressInstall:'http://developer.yahoo.com/yui/build/charts/assets/expressinstall.swf'
      });
    });
  }
});
if(document.location.toString().indexOf('http')!==-1){
  tablestoYUIchartsplease.insert();
}</code></pre>
<p>Let&#8217;s chunk it up and see what each section does:</p>
<pre><code>var tablestoYUIchartsplease = new YAHOO.util.YUILoader({
  require: ['charts'],
  onSuccess: function(){
</code></pre>
<p>First up, we let the <a href="http://developer.yahoo.com/yui/loader">YUI Loader</a> do its magic: We instantiate a new loader, tell it we need the <a href="http://developer.yahoo.com/yui/charts">YUI Charts Control</a> and wait for the different script nodes to be generated and the components to be loaded before we continue. The loader tells us all is OK by firing the <code>onSuccess</code> event, which we use to execute an anonymous function that does all the other work.</p>
<pre><code>    var tables = YAHOO.util.Dom.getElementsByClassName('yui-table','table');
    YAHOO.util.Dom.batch(tables,function(o){
</code></pre>
<p>We use <a href="http://developer.yahoo.com/yui/dom">the YUI Dom Collection</a> to get all tables with the correct class and apply a function to each of these tables using the <code>batch</code> method. The method sends the current table as the parameter <code>o</code> to this function.</p>
<pre><code>      var chartcontainer = document.createElement('div');
      YAHOO.util.Dom.addClass(chartcontainer,'yuichartfromtable');
      YAHOO.util.Dom.insertBefore(chartcontainer,o);
</code></pre>
<p>We create a new <code>div</code> element, give it a class of <code>yuichartfromtable</code> (to allow for styling) and insert the new element into the document before the table.</p>
<pre><code>      var data = new YAHOO.util.DataSource(o);
      data.responseType = YAHOO.util.DataSource.TYPE_HTMLTABLE;
      data.responseSchema = {fields:['response','count']};
</code></pre>
<p>Then we allow the rather new <a href="http://developer.yahoo.com/yui/datasource">YUI DataSource Utility</a>  to flex its binary muscles. While this is meant to wade through external data sources and JavaScript arrays for you, it also allows for a <code>responseType</code> of HTML table, which means it converts a table to a JavaScript object you can work with. As we&#8217;re dealing here with a really simple table, all we need to do in terms of <code>responseSchema</code> is to define two fields: a <code>response</code> (what) and a <code>count</code> (how many). These three lines are all you need to convert the table to a dataset that both the <a href="http://developer.yahoo.com/yui/charts">YUI Charts Control</a> and the <a href="http://developer.yahoo.com/yui/datatable">YUI DataTable Control</a> can use.</p>
<pre><code>      YAHOO.widget.Chart.SWFURL = 'http://developer.yahoo.com/yui/build/charts/assets/charts.swf?_yuiversion=2.4.1';
      var chart = new YAHOO.widget.PieChart(chartcontainer,data,{
        categoryField:'response',
        dataField:'count',
        expressInstall:'http://developer.yahoo.com/yui/build/charts/assets/expressinstall.swf'
      });
</code></pre>
<p>Time for pie: we define the URL of the Flash movie that draws the pie and instantiate a new pie chart. We send the <code>div</code> we created earlier as the container, the <code>data</code> we retrieved from the table as the data to display and define a configuration object. This object has the <code>response</code> field as the categories and the <code>count</code> field as the data. The <code>expressinstall</code> defines what Flash movie to show if the visitor doesn&#8217;t have the right Flash version.</p>
<pre><code>    });
  }
});
if(document.location.toString().indexOf('http')!==-1){
  tablestoYUIchartsplease.insert();
}</code></pre>
<p>Almost done. All the script now needs to do is to call the <code>insert()</code> method of the <a href="http://developer.yahoo.com/yui/yuiloader/">YUI Loader</a> &mdash; that gets the ball rolling. I&#8217;ve enclosed the method in an <code>if</code> statement that checks if the HTML is called up via HTTP or not as the Charts Control needs HTTP to work.</p>
<h2>Summary</h2>
<p>That&#8217;s all you need to do to progressively enhance an accessible data table to turn them into a pie chart using the YUI Charts Control. We can extend this example to allow for several types of charts and to turn the tables into sortable data tables quite easily. If there is interest, drop us a comment.</p>
</div>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/7ca3f79845f6e7ad8bc7769ca5abf1f5?s=32"> <div class="cont"><a href="http://wait-till-i.com" class="name">By Christian Heilmann</a><span class="date">January 17th, 2008<span></div></div>
				</div>
										
								<div class="post-157 post type-post status-publish format-standard hentry category-accessibility category-development tag-accessibility tag-aria tag-menu tag-todd-kloots tag-victor-tsaran tag-wai tag-yui">
				
						<h2 id="post-157"><a href="/blog/2007/12/21/menu-waiaria/">Using WAI-ARIA Roles and States with the YUI Menu Control</a></h2>
					

						<div class="entry">
							<table border="0" width="51	0" cellspacing="10">
<tbody>
<tr>
<td>
		   <img src="http://yuiblog.com/assets/kloots_tsaran.jpg" alt="Victor Tsaran (left) and Todd Kloots of Yahoo!" width="430" height="300">
		</td>
<td valign="bottom" style="font-size:10px;">
			<a href="http://www.flickr.com/photo_zoom.gne?id=414400167&#038;size=o">Image of Victor Tsaran by Stephen Woods</a>; <a href="http://www.flickr.com/photo_zoom.gne?id=413976052&#038;size=l">image of Todd Kloots by Sandy Leung</a>. Used by kind permission.</td>
</tr>
</tbody>
</table>
<p><strong>About the Authors:</strong> <em>A <a href="http://developer.yahoo.com/yui/examples/menu/menuwaiaria.html">new YUI example</a> demonstrates how to use the WAI-ARIA Roles and States with YUI&#8217;s <a href="http://developer.yahoo.com/yui/menu">Menu Control</a>.  In this article, YUI Menu author <strong>Todd Kloots</strong> and Yahoo! accessibility guru <strong>Victor Tsaran</strong> introduce the WAI-ARIA Roles and States, explain how they dovetail with Menu, and provide a detailed account of the user experience with two different screen readers.  </em></p>
<h3>What are WAI-ARIA Roles and States?</h3>
<p>Developed by IBM, and adopted by the W3C, the WAI-ARIA (Web Accessibility Initiative &#8211; Accessible Rich Internet Applications) Roles and States provide a means of making DHTML widgets and content accessible to assistive technologies such as  screen readers.   Much as CSS can be used to completely change the visual presentation of an HTML element, the WAI-ARIA Roles and States can be used to transform how HTML elements are presented to users of assistive technologies.</p>
<h3>How it works</h3>
<p>Implemented as a set of HTML attributes, the WAI-ARIA Roles and States bridge the gap between DHTML and assistive technology.  For example: while CSS provides a means of painting a <code>&#60;ul&#62;</code> element as a menu, and JavaScript allows for the implementation of the expected menu-like behaviors for that <code>&#60;ul&#62;</code> element, a screen reader only communicates to the user that the menu is a <code>&#60;ul&#62;</code> element.  Therefore, there is a gap between the developer&#8217;s intention for the role an HTML element is to play as a DHTML widget and how that widget is presented to a user of assistive technology.  The WAI-ARIA Roles and States close this gap, allowing the developer to accurately communicate the role an HTML element is to play in the scope of a DHTML widget.   When an element has  WAI-ARIA Roles and States applied, a screen reader will announce its role and current state when it is focused.  This allows <code>&#60;ul&#62;</code> elements to be presented as menus, <code>&#60;div&#62;</code> elements to be presented as modal dialogs, etc.</p>
<h3>The value of a DHTML Library</h3>
<p>The application of the WAI-ARIA Roles and States alone does not make a widget accessible.  It it is still up to the developer to implement the mouse and keyboard functionality that the user expects for the role applied to a given widget.  For this reason, a DHTML widget library can be helpful in that the nitty gritty of implementing the correct keyboard and mouse behaviors is done for you.  Such is the case with the YUI Menu library.  The YUI Menu implements all of the expected menu-like keyboard and mouse behaviors, so all the developer needs to do is apply the WAI-ARIA Roles and States.</p>
<h3>Applying Roles and States to a YUI Menu</h3>
<p>The WAI-ARIA Roles and States can be applied to a YUI Menu instance regardless of wether it is built using existing markup on the page, or entirely through JavaScript.  However, since the WAI-ARIA Roles and States depend on Menu&#8217;s JavaScript-based keyboard functionality, it follows that the attributes representing the WAI-ARIA Roles and States only be applied via JavaScript.  This <a href="http://en.wikipedia.org/wiki/Progressive_enhancement">progressive enhancement</a> strategy ensures the best possible user experience by only applying WAI-ARIA Roles and States when the browser technologies required to support them (in this case, CSS and JavaScript) are available.</p>
<p>When applying the attributes representing the WAI-ARIA Roles and States to a Menu widget, it is best to do so via a &#8220;render&#8221; event listener.  Waiting for a Menu&#8217;s &#8220;render&#8221; event to fire ensures that all of its DOM elements have been appended to the document and are available to be scripted.   Roles and states are added to a Menu&#8217;s DOM elements via the <a href="http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-core.html#ID-F68F082">setAttribute</a> method and removed via the  <a href="http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-core.html#ID-6D6AC0F9">removeAttribue</a> method.  The following excerpt from the <a href="http://developer.yahoo.com/yui/examples/menu/menuwaiaria.html">the Menu example</a> demonstrates this technique.</p>
<pre class="code">
/*
  Add the WAI-ARIA Roles and States to the MenuBar's DOM elements once it 
  is rendered.
*/

oMenuBar.subscribe("render", function () {

  /*
     Apply the "role" attribute of "menu" or "menubar" depending on the type of 
     the Menu control being rendered.
  */

  this.element.setAttribute("role", 
          (this instanceof YAHOO.widget.MenuBar ? "menubar" : "menu"));


  /*
     Apply the appropriate "role" and "aria-[state]" attributes to the label of
     each MenuItem instance.
  */

  var aMenuItems = this.getItems(),
    i = aMenuItems.length - 1,
    oMenuItem,
    oMenuItemLabel;
  

  do {

    oMenuItem = aMenuItems[i];


    /*
      Retrieve a reference to the anchor element that serves as the label for 
      each MenuItem.
    */

    oMenuItemLabel = oMenuItem.element.firstChild;


    // Set the "role" attribute of the label to "menuitem"

    oMenuItemLabel.setAttribute("role", "menuitem");


    // Remove the label from the browser's default tab order

    oMenuItemLabel.setAttribute("tabindex", -1);


    /*
      Optional: JAWS announces the value of each anchor element's "href"
      attribute when it recieves focus.  If the MenuItem instance's "url" 
      attribute is set to the default, remove the attribute so that JAWS 
      does announce its value.
    */

    if (oMenuItem.cfg.getProperty("url") == "#") {

      oMenuItemLabel.removeAttribute("href");
    
    }


    /*
      If the MenuItem has a submenu, set the "aria-haspopup" attribute to 
      true so that the screen reader can announce 
    */

    if (oMenuItem.cfg.getProperty("submenu")) {
    
      oMenuItemLabel.setAttribute("aria-haspopup", true);
    
    }

  }
  while (i--);
  

  /*
     Set the "tabindex" of the first MenuItem's label to 0 so the user can 
     easily tab into and out of the control.
  */

  if (this.getRoot() == this) {
  
    this.getItem(0).element.firstChild.setAttribute("tabindex", 0);
  
  }

});
</pre>
<p>The tables below lists the complete set of the menu-specific WAI-ARIA Roles and States and how they map to YUI Menu DOM elements.</p>
<h4><a href="http://www.w3.org/TR/aria-role/#roles">Related ARIA Roles</a></h4>
<table>
<thead>
<tr>
<th>WAI-ARIA Role</th>
<th>YUI Menu DOM Element</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.w3.org/TR/aria-role/#menu">menu</a></td>
<td><code>&#60;div class="yuimenu"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-role/#menubar">menubar</a></td>
<td><code>&#60;div class="yuimenubar"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-role/#menuitem">menuitem</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code> and <code>&#60;a class="yuimenubaritemlabel"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-role/#menuitemcheckbox">menuitemcheckbox</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-role/#menuitemradio">menuitemradio</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code></td>
</tr>
</tbody>
</table>
<h4><a href="http://www.w3.org/TR/aria-state/#widgets">Related ARIA States</a></h4>
<table>
<thead>
<tr>
<th>WAI-ARIA State</th>
<th>YUI Menu DOM Element</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.w3.org/TR/aria-state/#haspopup">haspopup</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code> and <code>&#60;a class="yuimenubaritemlabel"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-state/#checked">checked</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-state/#selected">selected</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code> and <code>&#60;a class="yuimenubaritemlabel"&#62;</code></td>
</tr>
<tr>
<td><a href="http://www.w3.org/TR/aria-state/#disabled">disabled</a></td>
<td><code>&#60;a class="yuimenuitemlabel"&#62;</code> and <code>&#60;a class="yuimenubaritemlabel"&#62;</code></td>
</tr>
</tbody>
</table>
<p>Once the WAI-ARIA Roles and States are applied, there are a few tweaks that can be made to the YUI Menu&#8217;s DOM elements to further improve the user experience.  For YUI Menu, the label of each MenuItem instance is represented in HTML as an anchor element (i.e. <code>&#60;a class="yuimenuitemlabel"&#62;</code>), and in IE and Firefox, anchor elements are automatically part of the tab order.  Having MenuItem labels in the tab order by default is important when JavaScript is disabled to ensure that the user can navigate a Menu via the keyboard with the tab key.</p>
<p>Since the YUI Menu code provides its own, desktop-like keyboard functionality when JavaScript is enabled, having every MenuItem label in the browser&#8217;s default tab order can be a nuisance to users screen readers.   When navigating the document with the tab key, users of screen readers have to tab through every single MenuItem label in a Menu, regardless of whether or not they want to use the Menu control.  This problem can be solved by setting the &#8220;tabindex&#8221; attribute of every MenuItem label but the first to a value of -1.  Setting an element&#8217;s &#8220;tabindex&#8221; attribute to a value of -1 removes it from the browser&#8217;s default tab order, while maintaining its focusability via JavaScript.  Since the YUI Menu keyboard functionality is activated when any MenuItem label has focus, with just one MenuItem label in the browser&#8217;s default tab order the Menu&#8217;s keyboard functionality will be preserved, while at the same time giving the user the ability to quickly tab into and out of the control.</p>
<h3>Supported Browsers and Screen Readers</h3>
<p>In order to take advantage of the WAI-ARIA Roles and States a user must have both a web browser and screen reader that support them.  Firefox 1.5 was the first browser to support the WAI-ARIA Roles and States, and its implementation has evolved considerably in version 3, making it much easier for developers to apply the attributes representing roles and states.  Both Microsoft and Opera are planing to implement the WAI-ARIA Roles and States in future versions of their browsers.  The two major screen readers, Freedom Scientific&#8217;s JAWS and GW Micro&#8217;s Window-Eyes both support the WAI-ARIA Roles and States, JAWS as of version 7.1 and Window-Eyes as of version 5.5.  Regardless of the screen reader you choose, it is necessary to turn off the <a href="http://juicystudio.com/article/making-ajax-work-with-screen-readers.php#screenmodes">virtual buffer</a> in order to take advantage of the WAI-ARIA Roles and States.</p>
<h3>Known Issues</h3>
<p>The YUI Menu example that uses the WAI-ARIA Roles and States was tested using Firefox 3 beta along with JAWS 8 and 9, and Window-Eyes 6.1.  The user experience with JAWS and Window-Eyes was almost identical, but there were a few small differences worth mentioning.</p>
<h4>JAWS</h4>
<p>Each MenuItem in a YUI Menu has a url property that can be used to specify a URL that it will automatically navigate to when clicked.  Setting the &#8220;url&#8221; property, sets the &#8220;href&#8221; attribute of the anchor element that serves as the MenuItem&#8217;s label.  If no value is specified for a MenuItem&#8217;s &#8220;url&#8221; property, the &#8220;href&#8221; attribute of the anchor element is set to &#8220;#&#8221; by default.   When a role of &#8220;menuitem&#8221; is applied to a MenuItem&#8217;s anchor element, JAWS still reads the value of the &#8220;href&#8221; attribute, which can be undesirable if the value of the &#8220;href&#8221; is set to &#8220;#.&#8221;  In such cases, it is best to just remove the &#8220;href&#8221; attribute.</p>
<p>One of the cool feature of JAWS is that when navigating a page&#8217;s DOM using the virtual buffer mode, if an element is selected that has one of the WAI-ARIA Roles applied, JAWS will automatically switch off the virtual buffer to take advantage of the WAI-ARIA Roles and States.</p>
<h4>Window-Eyes 6.1</h4>
<p>When the first item in a MenuBar receives focus, Window-Eyes doesn&#8217;t announce the role of &#8220;menubar,&#8221; but rather just the text label of the item along with its state.</p>
<h4>YUI Menu and the disabled WAI-ARIA State</h4>
<p>There is currently a minor issue with Menu and ARIA where the <a href="http://www.w3.org/TR/aria-state/#disabled">disabled</a> state cannot be used with MenuItems.  This is because if a MenuItem is disabled, Menu currently skips over it when navigating with the keyboard (a behavior based on menus in OS X).  This keyboard behavior will be updated in a future release of YUI Menu so that disabled MenuItem instances can be properly communicated to assistive technology.</p>
<h3>Resources</h3>
<ul>
<li><a href="http://developer.yahoo.com/yui/examples/menu/menuwaiaria.html">The new YUI Menu example demonstrating the use of WAI-ARIA roles and states</a></li>
<li><a href="http://developer.mozilla.org/en/docs/ARIA:_Accessible_Rich_Internet_Applications/Relationship_to_HTML_FAQ">ARIA: Accessible Rich Internet Applications/Relationship to HTML FAQ</a></li>
<li><a href="http://www.w3.org/TR/aria-role/">Roles for Accessible Rich Internet Applications (WAI-ARIA Roles) Version 1.0</a></li>
<li><a href="http://www.w3.org/TR/aria-state/">States and Properties Module for Accessible Rich Internet Applications (WAI-ARIA States and Properties) Version 1.0</a></li>
<li><a href="http://www.w3.org/WAI/PF/adaptable/HTML4/">Embedding Accessibility Role and State Metadata in HTML Documents</a></li>
<li><a href="http://www.mozilla.org/access/dhtml/">Accessible DHTML</a></li>
<li><a href="http://developer.mozilla.org/en/docs/Key-navigable_custom_DHTML_widgets">Key-navigable custom DHTML widgets</a></li>
<li><a href="http://www.mozilla.com/en-US/firefox/all-beta.html">Firefox 3 Beta 2</a></li>
<li><a href="http://www.freedomscientific.com/fs_products/software_jaws.asp">Freedom Scientific JAWS  Screen Reader</a></li>
<li><a href="http://www.gwmicro.com/Window-Eyes/">GW Micro Window-Eyes Screen Reader</a></li>
<li><a href="http://video.yahoo.com/video/play?vid=514676">An Introduction to Screen Readers</a></li>
<li><a href="http://juicystudio.com/article/making-ajax-work-with-screen-readers.php">Making Ajax Work with Screen Readers</a></li>
</ul>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/df4fd1f9aa463884decd65f5ea9d9584?s=32"> <div class="cont"><span class="name">By Todd Kloots</span><span class="date">December 21st, 2007<span></div></div>
				</div>
										
								<div class="post-123 post type-post status-publish format-standard hentry category-accessibility category-yui-theater">
				
						<h2 id="post-123"><a href="/blog/2007/08/15/video-henry/">YUI Theater &mdash; Shawn Henry: &#8220;Web Content Accessibility Guidelines Update&#8221;</a></h2>
					

						<div class="entry">
							<p><embed src='http://us.i1.yimg.com/cosmos.bcst.yahoo.com/player/media/swf/FLVVideoSolo.swf' flashvars='id=3712395&#038;emailUrl=http%3A%2F%2Fvideo.yahoo.com%2Futil%2Fmail%3Fei%3DUTF-8%26vid%3D955300&#038;imUrl=http%253A%252F%252Fvideo.yahoo.com%252Fvideo%252Fplay%253Fei%253DUTF-8%2526vid%253D955300&#038;imTitle=Shawn%2BHenry%253A%2B%2526quot%253BWeb%2BAccessibility%2BGuidelines%2BUpdate%2526quot%253B&#038;searchUrl=http://video.yahoo.com/search/video?p=&#038;profileUrl=http://video.yahoo.com/video/profile?yid=&#038;creatorValue=ZXJpY21pcmFnbGlh&#038;vid=955300' type='application/x-shockwave-flash' width='425' height='350'></embed></p>
<ul>
<li><a href="http://us.dl1.yimg.com/download.yahoo.com/dl/ydn/yui/theater/henry-wcag.mp4">This video is also available in a downloadable <code>.mp4</code> format.</a></li>
</ul>
<p><a href="http://video.yahoo.com/video/play?vid=955300"><img src="http://yuiblog.com/assets/shawnhenry.jpg" width="200" height="225" hspace="10" vspace="5" border="0" align="right" alt="Shawn Lawton Henry of the W3C"></a>Lots of the work in technology that we do is based on standards. In the Web world many standards such as HTML, CSS and many more have been produced by the World Wide Web Consortium (W3C).  <a href="http://www.w3.org/People/Shawn/">Shawn Lawton Henry</a> gave us an update on the standards produced by W3C&#8217;s Web Accessibility Initiative at Yahoo&#8217;s European headquarters in London. Where the Web Content Accessibility Guidelines (WCAG) 1.0 are very precise and contain a number of technical requirements that might be outdated, WCAG 2.0 takes a different approach. WCAG 2.0 takes a much more user-oriented approach. In her presentation, Shawn looks at the changes to WCAG as well as some of the other Accessibility standards produced by the W3C. Most of all she asks &quot;how can I build more accessible sites?&quot; so we can make the web a more friendly place.</p>
<p>A <a href="http://www.w3.org/WAI/highlights/200706wcag2pres">transcript of Shawn&#8217;s presentation</a> is available on the WAI website. Many thanks to Shawn for allowing us to record the session and share it <a href="http://developer.yahoo.com/yui/theater/">on YUI Theater</a>. </p>
<h3>Links:</h3>
<ol>
<li><strong><a href="http://www.w3.org/WAI/">Web Accessibility Initiative Home</a></strong> &lt;http://www.w3.org/WAI/&gt;</li>
<li>    <strong><a href="http://www.uiaccess.com/accessucd/index.html">Just Ask: Integrating Accessibility Throughout Design</a></strong> &lt;http://www.uiaccess.com/accessucd/index.html&gt;</li>
</ol>
						</div>

						<div class="meta">
    <img src="http://www.gravatar.com/avatar/b2638b265654e08237a86d0ae0ab6dfd?s=32"> <div class="cont"><span class="name">By Tom Hughes-Croucher</span><span class="date">August 15th, 2007<span></div></div>
				</div>
							
							<div class="bottom-nav">
					<div class="navigation yui3-g">
	<div class="next-posts yui3-u"><a href="/blog/category/accessibility/page/4/" >&laquo; Older Entries</a></div>
            <span class="greyed nav-separator">|</span> 
    	<div class="prev-posts yui3-u-1-2">
        <a href="/blog/category/accessibility/page/2/" >Newer Entries &raquo;</a>    </div>
</div>				</div>
						
	
</div>
</div>

<div id="sidebar" class="yui3-u-1-4"><div class="liner">

    <div id="pages-3" class="sidebox widget widget_pages"><div class="hd"><h2>Pages</h2></div><div class="bd">		<ul>
			<li class="page_item page-item-2"><a href="/blog/about/">About</a></li>
<li class="page_item page-item-989"><a href="/blog/contribute/">Contribute</a></li>
<li class="page_item page-item-1284"><a href="/blog/yui-team-positions/">YUI Jobs</a></li>
		</ul>
		</div></div>		<div id="recent-posts-3" class="sidebox widget widget_recent_entries">		<div class="hd"><h2>Recent Posts</h2></div><div class="bd">		<ul>
					<li>
				<a href="/blog/2014/06/16/yui-gallery-deprecation-announcement/">YUI Gallery Deprecation Announcement</a>
						</li>
					<li>
				<a href="/blog/2014/06/03/yui-3-17-2-released/">YUI 3.17.2 Released</a>
						</li>
					<li>
				<a href="/blog/2014/05/23/yui-3-17-2-release-candidate-1/">YUI 3.17.2 Release Candidate 1</a>
						</li>
					<li>
				<a href="/blog/2014/05/21/yui-3-17-1-released/">YUI 3.17.1 Released</a>
						</li>
					<li>
				<a href="/blog/2014/05/16/yui-weekly-for-may-16-2014/">YUI Weekly for May 16, 2014</a>
						</li>
				</ul>
		</div></div><div id="archives-3" class="sidebox widget widget_archive"><div class="hd"><h2>Archives</h2></div><div class="bd">		<select name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'> <option value="">Select Month</option> 	<option value='http://www.yuiblog.com/blog/2014/06/'> June 2014 </option>
	<option value='http://www.yuiblog.com/blog/2014/05/'> May 2014 </option>
	<option value='http://www.yuiblog.com/blog/2014/04/'> April 2014 </option>
	<option value='http://www.yuiblog.com/blog/2014/03/'> March 2014 </option>
	<option value='http://www.yuiblog.com/blog/2014/02/'> February 2014 </option>
	<option value='http://www.yuiblog.com/blog/2014/01/'> January 2014 </option>
	<option value='http://www.yuiblog.com/blog/2013/12/'> December 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/11/'> November 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/10/'> October 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/09/'> September 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/08/'> August 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/07/'> July 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/06/'> June 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/05/'> May 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/04/'> April 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/03/'> March 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/02/'> February 2013 </option>
	<option value='http://www.yuiblog.com/blog/2013/01/'> January 2013 </option>
	<option value='http://www.yuiblog.com/blog/2012/12/'> December 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/11/'> November 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/10/'> October 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/09/'> September 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/08/'> August 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/07/'> July 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/06/'> June 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/05/'> May 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/04/'> April 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/03/'> March 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/02/'> February 2012 </option>
	<option value='http://www.yuiblog.com/blog/2012/01/'> January 2012 </option>
	<option value='http://www.yuiblog.com/blog/2011/12/'> December 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/11/'> November 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/10/'> October 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/09/'> September 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/08/'> August 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/07/'> July 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/06/'> June 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/05/'> May 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/04/'> April 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/03/'> March 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/02/'> February 2011 </option>
	<option value='http://www.yuiblog.com/blog/2011/01/'> January 2011 </option>
	<option value='http://www.yuiblog.com/blog/2010/12/'> December 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/11/'> November 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/10/'> October 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/09/'> September 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/08/'> August 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/07/'> July 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/06/'> June 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/05/'> May 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/04/'> April 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/03/'> March 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/02/'> February 2010 </option>
	<option value='http://www.yuiblog.com/blog/2010/01/'> January 2010 </option>
	<option value='http://www.yuiblog.com/blog/2009/12/'> December 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/11/'> November 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/10/'> October 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/09/'> September 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/08/'> August 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/07/'> July 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/06/'> June 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/05/'> May 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/04/'> April 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/03/'> March 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/02/'> February 2009 </option>
	<option value='http://www.yuiblog.com/blog/2009/01/'> January 2009 </option>
	<option value='http://www.yuiblog.com/blog/2008/12/'> December 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/11/'> November 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/10/'> October 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/09/'> September 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/08/'> August 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/07/'> July 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/06/'> June 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/05/'> May 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/04/'> April 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/03/'> March 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/02/'> February 2008 </option>
	<option value='http://www.yuiblog.com/blog/2008/01/'> January 2008 </option>
	<option value='http://www.yuiblog.com/blog/2007/12/'> December 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/11/'> November 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/10/'> October 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/09/'> September 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/08/'> August 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/07/'> July 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/06/'> June 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/05/'> May 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/04/'> April 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/03/'> March 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/02/'> February 2007 </option>
	<option value='http://www.yuiblog.com/blog/2007/01/'> January 2007 </option>
	<option value='http://www.yuiblog.com/blog/2006/12/'> December 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/11/'> November 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/10/'> October 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/09/'> September 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/08/'> August 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/07/'> July 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/06/'> June 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/05/'> May 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/04/'> April 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/03/'> March 2006 </option>
	<option value='http://www.yuiblog.com/blog/2006/02/'> February 2006 </option>
 </select>
</div></div><div id="categories-2" class="sidebox widget widget_categories"><div class="hd"><h2>Categories</h2></div><div class="bd">		<ul>
	<li class="cat-item cat-item-69 current-cat"><a href="/blog/category/accessibility/" title="View all posts filed under Accessibility">Accessibility</a> (25)
</li>
	<li class="cat-item cat-item-524"><a href="/blog/category/css-101/" title="View all posts filed under CSS 101">CSS 101</a> (8)
</li>
	<li class="cat-item cat-item-1"><a href="/blog/category/design/" title="This category is for design related posts. For example, all posts about the design pattern library belong here.">Design</a> (51)
</li>
	<li class="cat-item cat-item-2"><a href="/blog/category/development/" title="For development related posts, including all posts about the Yahoo! User Interface Library.">Development</a> (652)
</li>
	<li class="cat-item cat-item-219"><a href="/blog/category/frontend-engineering-jobs-at-yahoo/" title="View all posts filed under Frontend Jobs at Yahoo">Frontend Jobs at Yahoo</a> (13)
</li>
	<li class="cat-item cat-item-96"><a href="/blog/category/graded-browser-support/" title="View all posts filed under Graded Browser Support">Graded Browser Support</a> (8)
</li>
	<li class="cat-item cat-item-11"><a href="/blog/category/in-the-wild/" title="In which we mention and link to third-party tutorials, discussions, comments, feedback, and implementations.">In the Wild</a> (63)
</li>
	<li class="cat-item cat-item-403"><a href="/blog/category/miscellany/" title="View all posts filed under Miscellany">Miscellany</a> (13)
</li>
	<li class="cat-item cat-item-483"><a href="/blog/category/open-hours/" title="View all posts filed under Open Hours">Open Hours</a> (44)
</li>
	<li class="cat-item cat-item-13"><a href="/blog/category/performance/" title="View all posts filed under Performance">Performance</a> (23)
</li>
	<li class="cat-item cat-item-598"><a href="/blog/category/releases/" title="View all posts filed under Releases">Releases</a> (50)
</li>
	<li class="cat-item cat-item-592"><a href="/blog/category/target-environments/" title="View all posts filed under Target Environments">Target Environments</a> (11)
</li>
	<li class="cat-item cat-item-599"><a href="/blog/category/development/yeti-development/" title="View all posts filed under Yeti">Yeti</a> (5)
</li>
	<li class="cat-item cat-item-292"><a href="/blog/category/yui-3-gallery/" title="View all posts filed under YUI 3 Gallery">YUI 3 Gallery</a> (34)
</li>
	<li class="cat-item cat-item-286"><a href="/blog/category/yui-events/" title="View all posts filed under YUI Events">YUI Events</a> (48)
</li>
	<li class="cat-item cat-item-8"><a href="/blog/category/yui-implementations/" title="View all posts filed under YUI Implementations">YUI Implementations</a> (55)
</li>
	<li class="cat-item cat-item-9"><a href="/blog/category/yui-theater/" title="View all posts filed under YUI Theater">YUI Theater</a> (164)
</li>
	<li class="cat-item cat-item-595"><a href="/blog/category/yui-weekly/" title="View all posts filed under YUI Weekly">YUI Weekly</a> (76)
</li>
	<li class="cat-item cat-item-602"><a href="/blog/category/yui-conf/" title="Posts pertaining to YUIConf - videos, notices, updates.">YUIConf</a> (27)
</li>
		</ul>
</div></div><div id="meta-2" class="sidebox widget widget_meta"><div class="hd"><h2>Meta</h2></div><div class="bd">			<ul>
						<li><a href="/blog/wp-login.php">Log in</a></li>
			<li><a href="/blog/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="/blog/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</div></div>
</div></div>
		</div><!-- /#bd -->
		<div id="ft">
			<footer>
				<div class="copyright">
			&copy; 2014 YUI Blog				</div>
			</footer></div></div><!-- /#doc -->

	<script type="text/javascript" language="JavaScript">
//<![CDATA[
var wpdone;
function wpvisit()
{
  var z;
  z="&r="+escape(document.referrer);
  z=z+"&b="+escape(navigator.appName+" "+navigator.appVersion);
  w=parseFloat(navigator.appVersion);
  if (w > 2.0) {
    z=z+"&s="+screen.width+"x"+screen.height;
    z=z+"&o="+navigator.platform;
    v="1.2";
    if (navigator.appName != "Netscape") {
      z=z+"&c="+screen.colorDepth;
    } else {
      z=z+"&c="+screen.pixelDepth
    }
    z=z+"&j="+navigator.javaEnabled();
  } else {
    v=1.0;
  }
  z=z+"&v="+v;

  document.writeln("<img border=\"0\" src=\"http://visit.webhosting.yahoo.com/wisit.gif"+"/blog/"+"?"+z+"\" />");
}
  wpvisit();
//]]>
</script>

<noscript><img src="http://visit.webhosting.yahoo.com/wisit.gif?1407501415" border="0" width="1" height="1" alt="visit" /></noscript>	
	<!-- Don't forget analytics -->

	<script src="http://yuilibrary.com/combo/hoverable-min.js"></script>

        <!-- Minified main.js from yuilibrary.com, with 'search' module requirement removed. -->
        <script>(function(){var b=navigator.userAgent,c="",a="";if(/windows/i.test(b)){a="pc";c="win"}else{if(/macintosh/i.test(b)){a="mac";c="osx"}else{if(/ios/i.test(b)){c="ios";if(/(?:iphone|ipod)/i.test(b)){a="iphone mac"}else{if(/ipad/i.test(b)){a="ipad mac"}}}else{if(/linux/i.test(b)){if(/android/i.test(b)){a="android pc"}else{a="pc"}c="linux"}}}}document.documentElement.className+=" "+a+" "+c}());YUI().use("hoverable",function(b){var a=new b.Hoverable({hoverClass:"nav-tab-hover",srcNode:"#main-nav"})});
        </script>
	<script src="http://yuilibrary.com/vendor/prettify/prettify-min.js"></script>
	<script>prettyPrint();</script>

	<script>
	(function() { /***
		var ga = document.createElement('script'); ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		***/
	}());
	</script>
	
</body></html><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/50f0aba8ce9ea20d2fd1df9287951fe1?id=4bff116c1ea8";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>